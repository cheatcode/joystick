import d from"https";import{URL as u}from"url";import h from"../../app/settings/load.js";const _=async(s="",p="")=>{const i=`${h()?.private?.cheatcode?.push_debug_url||"https://push.cheatcode.co"}/api/instances/${s}`,o=new u(i),a=JSON.stringify({type:s,data:p});return new Promise(n=>{const e=d.request({method:"POST",hostname:o.hostname,port:o.port||443,path:o.pathname,headers:{"x-push-instance-data":!0,"x-push-instance-token":process.env.PUSH_INSTANCE_TOKEN,"Content-Type":"application/json","Content-Length":Buffer.byteLength(a)},timeout:5e3},t=>{let r="";t.on("data",c=>{r+=c}),t.on("end",()=>{t.statusCode>=200&&t.statusCode<400?n(r):n()})});e.on("error",t=>{console.log("send_instance_data_to_push POST error",t),n()}),e.on("timeout",()=>{e.destroy(),n()}),e.write(a),e.end()})};var y=_;export{y as default};
