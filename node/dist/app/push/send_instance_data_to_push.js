import u from"../../app/settings/load.js";import a from"node-fetch";const i=async(o="",n="")=>{const e=`${u()?.private?.cheatcode?.push_debug_url||"https://push.cheatcode.co"}/api/instances/${o}`,s=await a(e,{method:"HEAD"});if(console.log({url:e,status:s.status,ok:s.ok,statusText:s.statusText}),!s.ok){console.log("CHECK RESPONSE NOT OKAY, PUSH NOT AVAILABLE.");return}const t=await a(e,{method:"POST",headers:{"x-push-instance-token":process.env.PUSH_INSTANCE_TOKEN,"Content-Type":"application/json"},body:JSON.stringify({type:o,data:n})});if(!t.ok){try{const r=await t.json();console.log("Push server error:",{status:t.status,statusText:t.statusText,error:r})}catch{const c=await t.text();console.log("Push server error:",{status:t.status,statusText:t.statusText,errorText:c})}return}return t};var T=i;export{T as default};
