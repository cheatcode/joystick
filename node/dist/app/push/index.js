import n from"fs";import c from"node-cron";import{NODE_CRON_EVERY_TEN_SECONDS as a,NODE_CRON_EVERY_THIRTY_SECONDS as e}from"../../lib/constants.js";import _ from"../../lib/path_exists.js";import r from"./send_instance_data_to_push.js";import i from"./snapshot_metrics.js";const{readFile:m}=n.promises,p=async()=>{const o="/root/push/logs/app.log";return await _(o)?m(o,"utf-8"):""},l=()=>{const o=c.schedule(a,async()=>{try{const s=await p();r("logs",s)}catch(s){console.warn("sync_logs_job",s)}}),t=c.schedule(e,async()=>{try{const s=await i();r("metrics",s)}catch(s){console.warn("sync_metrics_job",s)}});o.start(),t.start()};var N=l;export{N as default};
