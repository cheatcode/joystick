import o from"../../lib/types.js";import s from"../databases/queries/accounts.js";const i=(t="",e="")=>s("mark_email_verified_at",{user_id:t,token:e}),r=(t="")=>s("user_with_verify_email_token",{token:t}),n=async(t={})=>{const e=await r(t?.token);if(!e)throw new Error("A user with this token could not be found.");return await i(e?._id||e?.user_id,t?.token),(o.is_function(process.joystick?.app_options?.accounts?.events?.onVerifyEmail)||o.is_function(process.joystick?.app_options?.accounts?.events?.on_verify_email))&&(process.joystick?.app_options?.accounts?.events?.onVerifyEmail||process.joystick?.app_options?.accounts?.events?.on_verify_email)(e?.emailAddress||e?.email_address),!0};var _=n;export{_ as default};
