import c from"node-html-parser";import _ from"../../lib/types.js";const f=(u="",t=null,m={})=>{const o=c.parse(u),a=o.querySelector("head");if(!t)return o.toString();if(t.title){const e=a.querySelector("title");if(e){const s=c.parse(`<title>${t.title}</title>`);a.exchangeChild(e,s)}e||a.insertAdjacentHTML("afterbegin",`<title>${t.title}</title>`)}if(t.tags&&t.tags.meta&&_.is_array(t.tags.meta)&&t.tags.meta.length>0)for(let e=0;e<t?.tags?.meta?.length;e+=1){const s=t.tags.meta[e],r=a.querySelector(`meta[name="${s.name}"]`),n=c.parse("<meta />"),i=Object.entries(s||{});for(let l=0;l<i?.length;l+=1){const[g,p]=i[l];n.querySelector("meta").setAttribute(g,p)}r&&a.exchangeChild(r,n),r||a.appendChild(n)}if(t.tags&&t.tags.link&&_.is_array(t.tags.link)&&t.tags.link.length>0)for(let e=0;e<t?.tags?.link?.length;e+=1){const s=t?.tags?.link[e],r=c.parse("<link />"),n=Object.entries(s||{});for(let i=0;i<n?.length;i+=1){const[l,g]=n[i];r.querySelector("link").setAttribute(l,g)}a.appendChild(r)}if(t.tags&&t.tags.script&&Array.isArray(t.tags.script)&&t.tags.script.length>0)for(let e=0;e<t?.tags?.script?.length;e+=1){const s=t.tags.script[e],r=c.parse("<script></script>"),n=Object.entries(s||{});for(let i=0;i<n?.length;i+=1){const[l,g]=n[i];r.querySelector("script").setAttribute(l,g)}a.appendChild(r)}if(t.tags&&t.tags.style&&Array.isArray(t.tags.style)&&t.tags.style.length>0)for(let e=0;e<t?.tags?.style?.length;e+=1){const{attributes:s={},content:r=""}=t.tags.style[e],n=c.parse("<style></style>"),i=Object.entries(s),l=n.querySelector("style");l.setAttribute("type","text/css");for(let g=0;g<i?.length;g+=1){const[p,y]=i[g];l.setAttribute(p,y)}r&&(l.innerHTML=r),a.appendChild(n)}if(t.jsonld){const e=c.parse("<script></script>"),s=e.querySelector("script");s.setAttribute("type","application/ld+json"),s.set_content(JSON.stringify(t.jsonld,null,2)),a.appendChild(e)}return o.toString()};var S=f;export{S as default};
