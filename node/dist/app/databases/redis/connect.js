import t from"chalk";import{createClient as i}from"redis";const l=async(s={},r=2610)=>{try{const n=s?.connection||{hosts:[{hostname:"127.0.0.1",port:r}],database:0},c=n.hosts&&n.hosts[0],a={socket:{host:c?.hostname||"127.0.0.1",port:c?.port||r},database:n?.database||0,...n?.password&&{password:n.password},...n?.username&&{username:n.username},...s?.options||{}};s?.options?.tls&&(a.socket.tls=!0);const o=await i(a).on("error",e=>{console.warn(t.redBright(`Redis connection error: ${e.message}`))}).on("connect",()=>{}).connect();return{client:o,lpush:(...e)=>o.lPush(...e),rpop:(...e)=>o.rPop(...e),brpop:(...e)=>o.brPop(...e),llen:(...e)=>o.lLen(...e),lrange:(...e)=>o.lRange(...e),lrem:(...e)=>o.lRem(...e),hset:(...e)=>o.hSet(...e),hget:(...e)=>o.hGet(...e),hgetall:(...e)=>o.hGetAll(...e),hdel:(...e)=>o.hDel(...e),hexists:(...e)=>o.hExists(...e),sadd:(...e)=>o.sAdd(...e),srem:(...e)=>o.sRem(...e),smembers:(...e)=>o.sMembers(...e),sismember:(...e)=>o.sIsMember(...e),zadd:(...e)=>o.zAdd(...e),zrem:(...e)=>o.zRem(...e),zrange:(...e)=>o.zRange(...e),zrangebyscore:(...e)=>o.zRangeByScore(...e),zremrangebyscore:(...e)=>o.zRemRangeByScore(...e),set:(...e)=>o.set(...e),get:(...e)=>o.get(...e),del:(...e)=>o.del(...e),exists:(...e)=>o.exists(...e),expire:(...e)=>o.expire(...e),multi:()=>o.multi(),_connection:o}}catch(n){console.warn(n),console.warn(t.yellowBright(`
Failed to connect to Redis. Please double-check connection settings and try again.

Error from Redis:

${t.redBright(n?.message)}`))}};var d=l;export{d as default};
