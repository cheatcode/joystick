import o from"../databases/queries/sessions.js";import n from"../../lib/set_cookie.js";const c=async(s,e,t)=>{if(s?.url?.includes("/api/_push/health"))return;let i=s?.cookies?.joystick_session;(i?await o("get_session",{session_id:i}):null)||(i=await o("create_session"),n(e,"joystick_session",i)),s.cookies={...s?.cookies||{},joystick_session:i},s.context={...s?.context||{},session:await o("get_session",{session_id:i})},t()};var k=c;export{k as default};
