import o from"../../lib/types.js";const c=(t={},r=[])=>{const i=Object.entries(t||{});for(let n=0;n<i?.length;n+=1){const[a,e]=i[n],l=r.find(_=>_.key===a);if(l||delete t[a],!(l&&o.is_object(e)&&l.children.length===0)&&(l&&o.is_object(e)&&l.children.length>0&&c(e,l.children),l&&o.is_array(e)&&l.children&&l.children.length>0))for(let _=0;_<e?.length;_+=1){const s=e[_];s&&o.is_object(s)&&c(s,l.children)}}return t},f=(t=[])=>t.map(r=>r.split(".")),h=(t=[])=>{const[r,...i]=t;return{head:r,tail:i}},u=(t=[])=>t.map(r=>h(r)),d=(t=[],r=[])=>{for(let i=0;i<r?.length;i+=1){const n=r[i],a=t.find(e=>e.key===n.head);if(!a){const e=n.tail&&n.tail.length>0?h(n.tail):null;t.push({key:n.head,children:e?d([],[e]):[]})}if(a){const e=n.tail&&n.tail.length>0?h(n.tail):null;a.children=[...e?d(a.children,[e]):[]]}}return t},p=(t={},r=[])=>{const i=[],n=f(r),a=u(n);return d(i,a),o.is_array(t)?t.map(e=>c(e,i)):c(t,i)};var y=p;export{y as default};
