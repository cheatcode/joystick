import n from"../../accounts/index.js";import i from"../../accounts/default_user_output_fields.js";import r from"../handle_api_error.js";const a=async(t={},e={})=>{try{const o=await n.login({email_address:t?.body?.emailAddress||t?.body?.email_address,username:t?.body?.username,password:t?.body?.password,output:t?.body?.output||i});process.env.NODE_ENV!=="test"&&n._set_account_cookie(e,{token:o?.token,token_expires_at:o?.token_expires_at||o?.tokenExpiresAt});const s={...o?.user||{}};process.env.NODE_ENV==="test"&&(s.joystick_token=o?.token,s.joystick_login_token_expires_at=o?.token_expires_at),e.status(200).send(JSON.stringify(s))}catch(o){r("accounts.login",o,e)}};var c=a;export{c as default};
