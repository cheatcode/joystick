import{promisify as o}from"util";import{execFile as l}from"child_process";import i from"fs";import p from"os";import e from"path";const r=o(l),m=o(i.mkdir),y=o(i.symlink),d=async()=>{try{try{await r("which",["psql"]);return}catch{}process.loader.print("PostgreSQL not found. Downloading... (this may take a few minutes)"),await r("sudo",["apt-get","update"]),await r("sudo",["apt-get","install","-y","postgresql"]),process.loader.print("PostgreSQL installed!");const n="/usr/lib/postgresql/14/bin",s=e.join(p.homedir(),".joystick","databases","postgresql","bin"),a=e.join(s,"bin");await m(s,{recursive:!0});try{await y(n,a)}catch{}}catch(t){throw console.error("Error installing PostgreSQL:",t),t}};var w=d;export{w as default};
