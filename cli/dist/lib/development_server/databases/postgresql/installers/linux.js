import{promisify as o}from"util";import{execFile as l}from"child_process";import e from"fs";import p from"os";import n from"path";const r=o(l),m=o(e.mkdir),y=o(e.symlink),d=async()=>{try{try{await r("which",["psql"]);return}catch{}process.loader.print("PostgreSQL not found. Downloading... (this may take a few minutes)"),await r("sudo",["apt-get","update"]),await r("sudo",["apt-get","install","-y","postgresql"]),process.loader.print("PostgreSQL installed!");const a="/usr/lib/postgresql/14/bin",s=n.join(p.homedir(),".joystick","databases","postgresql","bin"),c=n.join(s,"bin");await m(s,{recursive:!0});try{await y(a,c)}catch(i){console.warn(i)}}catch(t){throw console.error("Error installing PostgreSQL:",t),t}};var w=d;export{w as default};
