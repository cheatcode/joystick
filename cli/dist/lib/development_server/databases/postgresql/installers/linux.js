import{promisify as s}from"util";import{execFile as l}from"child_process";import i from"fs";import e from"path";const o=s(l),p=s(i.mkdir),m=s(i.symlink),y=async()=>{try{try{await o("which",["psql"]);return}catch{}process.loader.print("PostgreSQL not found. Downloading... (this may take a few minutes)"),await o("sudo",["apt-get","update"]),await o("sudo",["apt-get","install","-y","postgresql"]),process.loader.print("PostgreSQL installed!");const n="/usr/lib/postgresql/14/bin",r=e.join(os.homedir(),".joystick","databases","postgresql","bin"),a=e.join(r,"bin");await p(r,{recursive:!0});try{await m(n,a)}catch{}}catch(t){throw console.error("Error installing PostgreSQL:",t),t}};var u=y;export{u as default};
