{
  "version": 3,
  "sources": ["../../../../../src/lib/development_server/databases/redis/check_connection.js"],
  "sourcesContent": ["import redis from 'redis';\nimport color_log from '../../../color_log.js';\n\nconst check_connection = async (connection = {}, options = {}) => {\n  try {\n    const host = connection?.hosts && connection?.hosts[0];\n    const connection_config = {\n      socket: {\n        host: host?.hostname || '127.0.0.1',\n        port: host?.port || 6379,\n        connectTimeout: 3000,\n      },\n      database: connection?.database || 0,\n    };\n\n    if (connection?.username) {\n      connection_config.username = connection.username;\n    }\n\n    if (connection?.password) {\n      connection_config.password = connection.password;\n    }\n\n    const client = redis.createClient(connection_config);\n\n    await client.connect();\n    await client.ping();\n    await client.disconnect();\n\n    return true;\n  } catch (exception) {\n    console.warn(exception);\n    color_log(\n      `\\n\u2716 Failed to connect to Redis. Please double-check connection settings and try again.`,\n      'yellow'\n    );\n\n    process.exit(1);\n  }\n};\n\nexport default check_connection;\n"],
  "mappings": "AAAA,OAAOA,MAAW,QAClB,OAAOC,MAAe,wBAEtB,MAAMC,EAAmB,MAAOC,EAAa,CAAC,EAAGC,EAAU,CAAC,IAAM,CAChE,GAAI,CACF,MAAMC,EAAOF,GAAY,OAASA,GAAY,MAAM,CAAC,EAC/CG,EAAoB,CACxB,OAAQ,CACN,KAAMD,GAAM,UAAY,YACxB,KAAMA,GAAM,MAAQ,KACpB,eAAgB,GAClB,EACA,SAAUF,GAAY,UAAY,CACpC,EAEIA,GAAY,WACdG,EAAkB,SAAWH,EAAW,UAGtCA,GAAY,WACdG,EAAkB,SAAWH,EAAW,UAG1C,MAAMI,EAASP,EAAM,aAAaM,CAAiB,EAEnD,aAAMC,EAAO,QAAQ,EACrB,MAAMA,EAAO,KAAK,EAClB,MAAMA,EAAO,WAAW,EAEjB,EACT,OAASC,EAAW,CAClB,QAAQ,KAAKA,CAAS,EACtBP,EACE;AAAA,2FACA,QACF,EAEA,QAAQ,KAAK,CAAC,CAChB,CACF,EAEA,IAAOQ,EAAQP",
  "names": ["redis", "color_log", "check_connection", "connection", "options", "host", "connection_config", "client", "exception", "check_connection_default"]
}
