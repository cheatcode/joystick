{
  "version": 3,
  "sources": ["../../../../../src/lib/development_server/databases/mongodb/check_connection.js"],
  "sourcesContent": ["import { MongoClient } from \"mongodb\";\nimport fs from 'fs';\nimport build_connection_string from \"./build_connection_string.js\";\nimport color_log from '../../../color_log.js';\n\nconst { readFile } = fs.promises;\n\nconst check_connection = async (connection = {}, mongodb_options = {}) => {\n  const connection_string = build_connection_string(connection);\n  \n  try {\n    const connectionOptions = {\n      connectTimeoutMS: 3000,\n      socketTimeoutMS: 3000,\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n      ssl: false,\n      ...(mongodb_options || {}),\n    };\n\n    if (mongodb_options?.ca) {\n      connectionOptions.ca = await readFile(mongodb_options?.ca);\n    }\n\n    const connection = await MongoClient.connect(connection_string, connectionOptions);\n    connection.close();\n\n    return true;\n  } catch (exception) {\n    console.warn(exception);\n\n    color_log(\n    \t`\\n\u2716 Failed to connect to MongoDB. Please double-check connection settings and try again.`,\n    \t'yellow'\n    );\n\n    process.exit(1);\n  }\n};\n\nexport default check_connection;\n"],
  "mappings": "AAAA,OAAS,eAAAA,MAAmB,UAC5B,OAAOC,MAAQ,KACf,OAAOC,MAA6B,+BACpC,OAAOC,MAAe,wBAEtB,KAAM,CAAE,SAAAC,CAAS,EAAIH,EAAG,SAElBI,EAAmB,MAAOC,EAAa,CAAC,EAAGC,EAAkB,CAAC,IAAM,CACxE,MAAMC,EAAoBN,EAAwBI,CAAU,EAE5D,GAAI,CACF,MAAMG,EAAoB,CACxB,iBAAkB,IAClB,gBAAiB,IACjB,gBAAiB,GACjB,mBAAoB,GACpB,IAAK,GACL,GAAIF,GAAmB,CAAC,CAC1B,EAEA,OAAIA,GAAiB,KACnBE,EAAkB,GAAK,MAAML,EAASG,GAAiB,EAAE,IAGxC,MAAMP,EAAY,QAAQQ,EAAmBC,CAAiB,GACtE,MAAM,EAEV,EACT,OAASC,EAAW,CAClB,QAAQ,KAAKA,CAAS,EAEtBP,EACC;AAAA,6FACA,QACD,EAEA,QAAQ,KAAK,CAAC,CAChB,CACF,EAEA,IAAOQ,EAAQN",
  "names": ["MongoClient", "fs", "build_connection_string", "color_log", "readFile", "check_connection", "connection", "mongodb_options", "connection_string", "connectionOptions", "exception", "check_connection_default"]
}
