{
  "version": 3,
  "sources": ["../../../../../src/lib/development_server/databases/mongodb/build_connection_string.js"],
  "sourcesContent": ["import build_query_parameters from \"./build_query_parameters.js\";\nimport serialize_query_parameters from \"../../../serialize_query_parameters.js\";\nimport types from \"../../../types.js\";\n\nconst build_connection_string = (connection = {}) => {\n  let connection_string = \"mongodb://\";\n\n  // NOTE: Swap protocols if we're using a DNS Seedlist URL (mongodb+srv://).\n  if (connection?.srv) {\n    connection_string = \"mongodb+srv://\";\n  }\n\n  if (connection && (connection.username || connection.password)) {\n    connection_string = `${connection_string}${connection.username || connection.password ? `${connection.username || \"\"}${!!connection.username && !!connection.password ? ':' : ''}${connection.password || \"\"}@` : ''}`;\n  }\n\n  if (connection && connection.hosts && types.is_array(connection.hosts)) {\n    connection_string = `${connection_string}${connection.hosts\n      .map((host) => connection?.srv ? host.hostname : `${host.hostname}:${host.port}`)\n      .join(\",\")}`;\n  }\n\n  if (connection && connection.database) {\n    connection_string = `${connection_string}/${connection.database}`;\n  }\n\n  const query_parameters = build_query_parameters(connection);\n\n  if (Object.keys(query_parameters)?.length > 0 ) {\n    connection_string = `${connection_string}?${serialize_query_parameters(query_parameters)}`;\n  }\n\n  return connection_string;\n};\n\nexport default build_connection_string;\n"],
  "mappings": "AAAA,OAAOA,MAA4B,8BACnC,OAAOC,MAAgC,yCACvC,OAAOC,MAAW,oBAElB,MAAMC,EAA0B,CAACC,EAAa,CAAC,IAAM,CACnD,IAAIC,EAAoB,aAGpBD,GAAY,MACdC,EAAoB,kBAGlBD,IAAeA,EAAW,UAAYA,EAAW,YACnDC,EAAoB,GAAGA,CAAiB,GAAGD,EAAW,UAAYA,EAAW,SAAW,GAAGA,EAAW,UAAY,EAAE,GAAKA,EAAW,UAAcA,EAAW,SAAW,IAAM,EAAE,GAAGA,EAAW,UAAY,EAAE,IAAM,EAAE,IAGlNA,GAAcA,EAAW,OAASF,EAAM,SAASE,EAAW,KAAK,IACnEC,EAAoB,GAAGA,CAAiB,GAAGD,EAAW,MACnD,IAAKE,GAASF,GAAY,IAAME,EAAK,SAAW,GAAGA,EAAK,QAAQ,IAAIA,EAAK,IAAI,EAAE,EAC/E,KAAK,GAAG,CAAC,IAGVF,GAAcA,EAAW,WAC3BC,EAAoB,GAAGA,CAAiB,IAAID,EAAW,QAAQ,IAGjE,MAAMG,EAAmBP,EAAuBI,CAAU,EAE1D,OAAI,OAAO,KAAKG,CAAgB,GAAG,OAAS,IAC1CF,EAAoB,GAAGA,CAAiB,IAAIJ,EAA2BM,CAAgB,CAAC,IAGnFF,CACT,EAEA,IAAOG,EAAQL",
  "names": ["build_query_parameters", "serialize_query_parameters", "types", "build_connection_string", "connection", "connection_string", "host", "query_parameters", "build_connection_string_default"]
}
