{
  "version": 3,
  "sources": ["../../../src/lib/development_server/start_app_server.js"],
  "sourcesContent": ["import child_process from \"child_process\";\nimport path from \"path\";\n\nconst start_app_server_process = (exec_argv = [], watch = false) => {\n  if (process.env.NODE_ENV !== 'test') {\n    process.loader.print('Starting app...');\n  }\n\n  return child_process.fork(\n    path.resolve(\".joystick/build/index.server.js\"),\n    [],\n    {\n      execArgv: exec_argv,\n      // NOTE: Pipe stdin, stdout, and stderr. IPC establishes a message channel so we\n      // communicate with the child_process.\n      silent: true,\n      env: {\n        FORCE_COLOR: \"1\",\n        LOGS_PATH: process.env.LOGS_PATH,\n        NODE_ENV: process.env.NODE_ENV,\n        ROOT_URL: process.env.ROOT_URL,\n        PORT: process.env.PORT,\n        JOYSTICK_SETTINGS: process.env.JOYSTICK_SETTINGS,\n      },\n    }\n  );\n};\n\nconst get_exec_args = (node_major_version = 0, imports = []) => {\n  const exec_argv = [\"--no-warnings\"];\n\n  if (process.env.NODE_ENV === 'development') {\n    // NOTE: Ensure that localhost is not swapped with ::1 (IPv6 local address) in Node v17-v19.\n    // See here for information: https://github.com/nodejs/node/issues/40702#issuecomment-958157082\n    exec_argv.push(\"--dns-result-order=ipv4first\");\n  }\n\n  if (node_major_version < 19) {\n    exec_argv.push(\"--experimental-specifier-resolution=node\");\n  }\n\n  if (process.env.NODE_ENV === \"development\" && process.env.IS_DEBUG_MODE === \"true\") {\n    exec_argv.push(\"--inspect\");\n  }\n\n  for (let i = 0; i < imports?.length; i += 1) {\n    const import_path = imports[i];\n    exec_argv.push(\"--import\", import_path);\n  }\n\n  return exec_argv;\n};\n\nconst start_app_server = (node_major_version = 0, watch = false, imports = []) => {\n  console.log({ start_app_server: imports });\n  const exec_argv = get_exec_args(node_major_version, imports);\n  const app_server_process = start_app_server_process(exec_argv, watch);\n  return app_server_process;\n};\n\nexport default start_app_server;\n"],
  "mappings": "AAAA,OAAOA,MAAmB,gBAC1B,OAAOC,MAAU,OAEjB,MAAMC,EAA2B,CAACC,EAAY,CAAC,EAAGC,EAAQ,MACpD,QAAQ,IAAI,WAAa,QAC3B,QAAQ,OAAO,MAAM,iBAAiB,EAGjCJ,EAAc,KACnBC,EAAK,QAAQ,iCAAiC,EAC9C,CAAC,EACD,CACE,SAAUE,EAGV,OAAQ,GACR,IAAK,CACH,YAAa,IACb,UAAW,QAAQ,IAAI,UACvB,SAAU,QAAQ,IAAI,SACtB,SAAU,QAAQ,IAAI,SACtB,KAAM,QAAQ,IAAI,KAClB,kBAAmB,QAAQ,IAAI,iBACjC,CACF,CACF,GAGIE,EAAgB,CAACC,EAAqB,EAAGC,EAAU,CAAC,IAAM,CAC9D,MAAMJ,EAAY,CAAC,eAAe,EAE9B,QAAQ,IAAI,WAAa,eAG3BA,EAAU,KAAK,8BAA8B,EAG3CG,EAAqB,IACvBH,EAAU,KAAK,0CAA0C,EAGvD,QAAQ,IAAI,WAAa,eAAiB,QAAQ,IAAI,gBAAkB,QAC1EA,EAAU,KAAK,WAAW,EAG5B,QAASK,EAAI,EAAGA,EAAID,GAAS,OAAQC,GAAK,EAAG,CAC3C,MAAMC,EAAcF,EAAQC,CAAC,EAC7BL,EAAU,KAAK,WAAYM,CAAW,CACxC,CAEA,OAAON,CACT,EAEMO,EAAmB,CAACJ,EAAqB,EAAGF,EAAQ,GAAOG,EAAU,CAAC,IAAM,CAChF,QAAQ,IAAI,CAAE,iBAAkBA,CAAQ,CAAC,EACzC,MAAMJ,EAAYE,EAAcC,EAAoBC,CAAO,EAE3D,OAD2BL,EAAyBC,EAAWC,CAAK,CAEtE,EAEA,IAAOO,EAAQD",
  "names": ["child_process", "path", "start_app_server_process", "exec_argv", "watch", "get_exec_args", "node_major_version", "imports", "i", "import_path", "start_app_server", "start_app_server_default"]
}
