{
  "version": 3,
  "sources": ["../../../src/lib/development_server/index.js"],
  "sourcesContent": ["import chalk from 'chalk';\nimport child_process from 'child_process';\nimport fs from 'fs';\nimport os from 'os';\nimport path, { dirname } from \"path\";\nimport { fileURLToPath } from \"url\";\nimport util from 'util';\nimport check_if_port_occupied from './check_if_port_occupied.js';\nimport cli_log from '../cli_log.js';\nimport get_database_process_ids from './get_database_process_ids.js';\n import get_platform_safe_path from '../get_platform_safe_path.js';\nimport kill_port_process from '../kill_port_process.js';\nimport load_settings from '../load_settings.js';\nimport Loader from '../loader.js';\nimport path_exists from '../path_exists.js';\nimport required_files from '../required_files.js';\nimport start_app_server from './start_app_server.js';\nimport start_databases from './start_databases.js';\nimport start_hmr_server from './start_hmr_server.js';\nimport watch_for_changes from './watch_for_changes/index.js';\nimport constants from '../constants.js';\nimport kill_process_ids from './kill_process_ids.js';\nimport run_tests, { run_tests_integrated } from './run_tests.js';\nimport debounce from '../debounce.js';\nimport download_database_binary from './databases/download_database_binary.js';\n\nconst { stat } = fs.promises;\nconst exec = util.promisify(child_process.exec);\n\nconst node_major_version = parseInt(\n  process?.version?.split(\".\")[0]?.replace(\"v\", \"\"),\n  10\n);\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nconst process_ids = [];\n\nconst handle_run_tests = async (watch = false) => {\n  const database_process_ids = get_database_process_ids();\n  await run_tests({\n    watch,\n    __dirname,\n    process_ids: [\n      ...process_ids,\n      ...database_process_ids,\n    ],\n    cleanup_process: process.cleanup_process,\n  });\n};\n\nconst handle_signal_events = (process_ids = [], node_major_version = 0, __dirname = '') => {\n  const exec_argv = [\"--no-warnings\"];\n\n  if (node_major_version < 19) {\n    exec_argv.push(\"--experimental-specifier-resolution=node\");\n  }\n\n  const cleanup_process = child_process.fork(\n    path.resolve(`${__dirname}/cleanup.js`),\n    [],\n    {\n      // NOTE: Run in detached mode so when parent process dies, the child still runs\n      // and cleanup completes. Keep silent as we don't wan't/expect any messages.\n      detached: true,\n      silent: true,\n    }\n  );\n\n  process.cleanup_process = cleanup_process;\n\n  process.on(\"SIGINT\", async () => {\n    const database_process_ids = get_database_process_ids();\n    cleanup_process.send(JSON.stringify(({ process_ids: [...process_ids, ...database_process_ids] })));\n    process.exit();\n  });\n\n  process.on(\"SIGTERM\", async () => {\n    const database_process_ids = get_database_process_ids();\n    cleanup_process.send(JSON.stringify(({ process_ids: [...process_ids, ...database_process_ids] })));\n    process.exit();\n  });\n};\n\nconst handle_signal_hmr_update = async (jobs = []) => {\n  const has_settings_change = jobs?.find((job) => (job?.path?.match(constants.SETTINGS_FILE_NAME_REGEX))?.length > 0);\n  const has_i18n_change = jobs?.find((job) => job?.path?.includes('i18n'));\n  const has_index_html_change = jobs?.find((job) => job?.path?.includes('index.html'));\n  const has_index_css_change = jobs?.find((job) => {\n    return job?.path?.includes('index.css') || job?.path?.includes('css/');\n  });\n  const has_index_client_change = jobs?.find((job) => job?.path?.includes('index.client.js'));\n\n  process.hmr_server_process.send(JSON.stringify({\n    type: 'FILE_CHANGE',\n    settings: has_settings_change ? (await load_settings(process.env.NODE_ENV)).settings : null,\n    i18n_change: !!has_i18n_change,\n    index_html_change: !!has_index_html_change,\n    index_css_change: !!has_index_css_change,\n    index_client_change: !!has_index_client_change,\n  }));\n};\n\nconst handle_hmr_server_process_messages = (node_major_version = 0, watch = false, old_settings = {}, imports = [], run_integrated_tests = false) => {\n  process.hmr_server_process.on(\"message\", async (message) => {\n    const process_messages = [\n      \"HAS_HMR_CONNECTIONS\",\n      \"HAS_NO_HMR_CONNECTIONS\",\n      \"HMR_UPDATE_COMPLETE\",\n    ];\n\n    if (!process_messages.includes(message?.type)) {\n      process.loader.print(message);\n    }\n\n    if (message?.type === \"HAS_HMR_CONNECTIONS\") {\n      process.hmr_server_process.has_connections = true;\n    }\n\n    if (message?.type === \"HAS_NO_HMR_CONNECTIONS\") {\n      process.hmr_server_process.has_connections = false;\n    }\n\n    if (message?.type === \"HMR_UPDATE_COMPLETE\") {\n      if (process.app_server_process && !process.app_server_restarting) {\n        process.app_server_restarting = true;\n        handle_restart_app_server(node_major_version, watch, old_settings, imports, run_integrated_tests);\n      }\n    }\n  });\n};\n\nconst handle_hmr_server_process_stdio = () => {\n  process.hmr_server_process.on(\"error\", (error) => {\n    cli_log(error.toString(), {\n      level: \"danger\",\n      docs: \"https://github.com/cheatcode/joystick\",\n    });\n  });\n\n  process.hmr_server_process.stdout.on(\"data\", (data) => {\n    console.log(data.toString());\n  });\n\n  process.hmr_server_process.stderr.on(\"data\", (data) => {\n    cli_log(data.toString(), {\n      level: \"danger\",\n      docs: \"https://github.com/cheatcode/joystick\",\n    });\n  });\n};\n\nconst handle_start_hmr_server = (node_major_version = 0, __dirname = '', watch = false, old_settings = {}, imports = [], run_integrated_tests = false) => {\n\tprocess.hmr_server_process = start_hmr_server(node_major_version, __dirname);\n  process_ids.push(process.hmr_server_process?.pid);\n  handle_hmr_server_process_stdio();\n  handle_hmr_server_process_messages(node_major_version, watch, old_settings, imports, run_integrated_tests);\n};\n\nconst check_if_database_changes = async (old_settings = {}) => {\n  const { settings: new_settings } = await load_settings(process.env.NODE_ENV);\n  const new_databse_settings = new_settings?.config?.databases ? JSON.stringify(new_settings?.config?.databases) : '';\n  const old_database_settings = old_settings?.config?.databases ? JSON.stringify(old_settings?.config?.databases) : '';\n  return new_databse_settings !== old_database_settings;\n};\n\nconst handle_restart_app_server = async (node_major_version = 0, watch = false, old_settings = null, imports = [], run_integrated_tests = false) => {\n  debounce(async () => {\n    const has_database_changes = await check_if_database_changes(old_settings);\n\n    if (has_database_changes) {\n      const database_process_ids = get_database_process_ids();\n\n      cli_log(`Database configuration has changed in settings.${process.env.NODE_ENV}.json. Please restart your app to add, change, or remove databases.`, {\n        level: \"danger\",\n        docs: \"https://cheatcode.co/docs/joystick/structure\",\n      });\n\n      kill_process_ids([\n        process.hmr_server_process?.pid,\n        process.app_server_process?.pid,\n        ...database_process_ids,\n      ]);\n\n      process.exit(0);\n    } else {\n      kill_process_ids([\n        ...(process.app_server_process.external_process_ids || []),\n      ]);\n\n      await kill_port_process(process.env.PORT);\n      handle_start_app_server(node_major_version, watch, imports, run_integrated_tests);\n    }\n  }, 300);\n};\n\nconst handle_app_server_process_stdio = (watch = false, run_integrated_tests = false, is_test_server = false) => {\n  // NOTE: Default this in case we never get any external process IDs.\n  process.app_server_process.external_process_ids = [];\n\n  process.app_server_process.on('message', (message_from_child) => {\n    if (message_from_child?.external_process_id) {\n      process.app_server_process.external_process_ids = [\n        ...(process.app_server_process.external_process_ids || []),\n        message_from_child?.external_process_id,\n      ];\n    }\n  });\n\n  process.app_server_process.on('error', (error) => {\n    if (!is_test_server) {\n      cli_log(error.toString(), {\n        level: \"danger\",\n        docs: \"https://github.com/cheatcode/joystick\",\n      });\n    }\n  });\n\n  process.app_server_process.stdout.on(\"data\", async (data) => {\n  \tconst stdout = data.toString();\n    const is_startup_notification = stdout.includes(\"App running at:\");\n\n    // NOTE: Suppress all test server output\n    if (is_test_server) {\n      process.loader.print(stdout); // temp to debug\n      return;\n    }\n\n    // NOTE: Main server output handling\n  \tif (stdout && is_startup_notification && process.env.NODE_ENV !== 'test') {\n  \t\tprocess.loader.print(stdout);\n  \t}\n\n    if (stdout && !is_startup_notification && !stdout.includes(\"BUILD_ERROR\")) {\n      console.log(stdout);\n    }\n\n    // NOTE: Run tests here so we can guarantee app server is running. Do a slight delay\n    // to ensure that test routes are registered.\n    if (stdout && is_startup_notification && process.env.NODE_ENV === 'test') {\n      handle_run_tests(watch);\n    }\n\n    // NOTE: Run integrated tests when --tests flag is used and server has started\n    if (stdout && is_startup_notification && run_integrated_tests && process.env.NODE_ENV !== 'test') {\n      // NOTE: Add delay to avoid jarring UX and ensure server is fully ready\n      setTimeout(async () => {\n        try {\n          await run_tests_integrated({\n            __dirname,\n          });\n        } catch (error) {\n          console.error('Error running integrated tests:', error);\n        }\n      }, 3000);\n    }\n  });\n\n  process.app_server_process.stderr.on(\"data\", (data) => {\n    // if (!is_test_server) {\n      cli_log(data.toString(), {\n        level: \"danger\",\n        docs: \"https://cheatcode.co/docs/joystick\",\n      });\n    // }\n  });\n};\n\nconst handle_start_app_server = (node_major_version = 0, watch = false, imports = [], run_integrated_tests = false, is_test_server = false, env_options = {}) => {\n\tprocess.app_server_process = start_app_server(node_major_version, watch, imports, env_options);\n  process_ids.push(process.app_server_process?.pid);\n  handle_app_server_process_stdio(watch, run_integrated_tests, is_test_server);\n  process.app_server_restarting = false;\n};\n\nconst install_missing_databases = async (settings = {}, callback = null) => {\n  const required_databases = settings?.config?.databases?.map((database = {}) => {\n    return database?.provider;\n  });\n\n  for (let i = 0; i < required_databases?.length; i += 1) {\n    const provider_name = required_databases[i];\n    await download_database_binary(provider_name);\n  }\n\n  if (callback) {\n    // NOTE: Wait additional time for database setup after all installations complete\n    const wait_time = required_databases?.length > 0 ? 3000 : 0;\n    setTimeout(callback, wait_time);\n  }\n};\n\nconst set_process_variables = (development_server_options = {}, port = 2600) => {\n  process.title = development_server_options?.environment === 'test' ? \"joystick_test\" : 'joystick';\n  process.project_folder = path.basename(process.cwd());\n  process.loader = new Loader();\n\n  if (development_server_options?.environment === 'test') {\n    console.log(''); // NOTE: Silly, but gives us better styling.\n    process.loader.print(\"Initializing test environment...\\n\");\n  }\n\n  process.env.LOGS_PATH = development_server_options?.logs || null;\n  process.env.NODE_ENV = development_server_options?.environment || \"development\";\n  process.env.PORT = port;\n  process.env.IS_DEBUG_MODE = development_server_options?.debug;\n};\n\nconst warn_app_port_occupied = (port = 2600) => {\n  cli_log(`Port ${port} is already occupied. To start Joystick on this port, clear it and try again.`, {\n    level: 'danger',\n  });\n\n  process.exit(0);\n};\n\nconst get_port = (port = 2600) => {\n\treturn parseInt(port || 2600, 10);\n};\n\nconst clean_up_existing_build = async () => {\n\tconst build_path = get_platform_safe_path(`${process.cwd()}/.joystick/build`);\n\n\tif (await path_exists(build_path)) {\n\t\tawait exec(`${process.platform === 'win32' ? 'rmdir /s /q' : 'rm -rf'} ${build_path}`);\n\t}\n};\n\nconst check_for_required_files = async () => {\n  const missing_files = [];\n\n  for (let i = 0; i < required_files?.length; i += 1) {\n    const required_file = required_files[i];\n    const exists = await path_exists(`${process.cwd()}/${required_file.path}`);\n    const stats = exists && await stat(`${process.cwd()}/${required_file.path}`);\n\n    if (required_file && required_file.type === \"file\" && (!exists || (exists && !stats.isFile()))) {\n      missing_files.push({ type: 'file', path: required_file.path });\n    }\n\n    if (required_file && required_file.type === \"directory\" && (!exists || (exists && !stats.isDirectory()))) {\n      missing_files.push({ type: 'directory', path: required_file.path });\n    }\n  }\n\n  if (missing_files?.length > 0) {\n    const files = missing_files?.filter((path) => path.type === 'file');\n    const directories = missing_files?.filter((path) => path.type === 'directory');\n\n    let error = `The following paths are missing and required in a Joystick project:\\n\\n`;\n\n    if (files?.length > 0) {\n      error += `  ${chalk.yellow('>')} Required Files:\\n\\n`;\n\n      for (let i = 0; i < files?.length; i += 1) {\n        const file = files[i];\n        const is_last_file = i +1 === files?.length;\n        error += `  ${chalk.red(`/${file.path}\\n${is_last_file && directories?.length > 0 ? '\\n' : ''}`)}`;\n      }\n    }\n\n    if (directories?.length > 0) {\n      error += `  ${chalk.yellow('>')} Required Directories:\\n\\n`;\n\n      for (let i = 0; i < directories?.length; i += 1) {\n        const file = directories[i];\n        error += `  ${chalk.red(`/${file.path}\\n`)}`;\n      }\n    }\n\n    cli_log(error, {\n      level: \"danger\",\n      docs: \"https://cheatcode.co/docs/joystick/structure\",\n    });\n\n    process.exit(0);\n  }\n};\n\nconst warn_invalid_joystick_environment = async () => {\n  const has_joystick_folder = await path_exists(`${process.cwd()}/.joystick`);\n  const has_tests_folder = await path_exists(`${process.cwd()}/tests`);\n\n  if (process.env.NODE_ENV === 'test' && (!has_joystick_folder || !has_tests_folder)) {\n    cli_log(\n      \"joystick test must be run in a directory with a .joystick folder and tests folder.\",\n      {\n        level: \"danger\",\n        docs: \"https://cheatcode.co/docs/joystick/cli/test\",\n      }\n    );\n\n    process.exit(0);\n  }\n\n  if (process.env.NODE_ENV !== 'test' && !has_joystick_folder) {\n    cli_log(\n      \"joystick start must be run in a directory with a .joystick folder.\",\n      {\n        level: \"danger\",\n        docs: \"https://cheatcode.co/docs/joystick/cli/start\",\n      }\n    );\n\n    process.exit(0);\n  }\n};\n\nconst development_server = async (development_server_options = {}) => {\n  await warn_invalid_joystick_environment();\n  await check_for_required_files();\n\n\tawait clean_up_existing_build();\n\n\tconst port = get_port(development_server_options?.port);\n\tconst app_port_occupied = await check_if_port_occupied(port);\n  const hmr_port_occupied = await check_if_port_occupied(port + 1);\n\n  if (app_port_occupied) {\n  \twarn_app_port_occupied(port);\n  }\n\n  if (hmr_port_occupied) {\n  \tkill_port_process(port);\n  }\n\n  set_process_variables(development_server_options, port);\n\n  // NOTE: Load settings with different approaches based on whether --tests is enabled\n  let main_settings, main_raw_settings;\n  if (development_server_options?.tests && development_server_options?.environment !== 'test') {\n    // NOTE: When --tests is enabled, load main settings without setting global env\n    const main_settings_result = await load_settings(process.env.NODE_ENV, { skip_global_env: true });\n    main_settings = main_settings_result.settings;\n    main_raw_settings = main_settings_result.raw_settings;\n  } else {\n    // NOTE: Normal operation, set global env as before\n    const settings_result = await load_settings(process.env.NODE_ENV);\n    main_settings = settings_result.settings;\n    main_raw_settings = settings_result.raw_settings;\n  }\n\n  await install_missing_databases(main_settings);\n\n  await start_databases({\n    environment: process.env.NODE_ENV,\n    port,\n    settings: main_settings\n  });\n\n  // NOTE: Start main app server with appropriate settings\n  const main_app_env_options = development_server_options?.tests && development_server_options?.environment !== 'test' \n    ? { JOYSTICK_SETTINGS: main_raw_settings }\n    : {};\n\n  // NOTE: If tests flag is enabled, start a separate test server on port 1977.\n  if (development_server_options?.tests && development_server_options?.environment !== 'test') {\n    const test_port_occupied = await check_if_port_occupied(1977);\n    if (test_port_occupied) {\n      await kill_port_process(1977);\n    }\n\n    // NOTE: Start test server directly without recursive development_server call\n    setTimeout(async () => {\n      try {\n        // NOTE: Load test settings without setting global env\n        const test_settings_result = await load_settings('test', { skip_global_env: true });\n        const test_settings = test_settings_result.settings;\n        const test_raw_settings = test_settings_result.raw_settings;\n\n        // NOTE: Install missing databases for test environment with callback\n        await install_missing_databases(test_settings, async () => {\n          try {\n            await start_databases({\n              environment: 'test',\n              port: 1977,\n              settings: test_settings,\n            });\n            \n            const test_app_server = start_app_server(node_major_version, false, development_server_options?.imports || [], {\n              NODE_ENV: 'test',\n              PORT: 1977,\n              LOGS_PATH: process.env.LOGS_PATH,\n              ROOT_URL: process.env.ROOT_URL,\n              JOYSTICK_SETTINGS: test_raw_settings,\n            });\n\n            process_ids.push(test_app_server?.pid);\n            \n            // NOTE: Store test server separately to avoid interfering with main server\n            process.test_app_server_process = test_app_server;\n            \n            // NOTE: Handle test server stdio without integrated tests to avoid recursion\n            test_app_server.external_process_ids = [];\n            \n            test_app_server.on('message', (message_from_child) => {\n              if (message_from_child?.external_process_id) {\n                test_app_server.external_process_ids = [\n                  ...(test_app_server.external_process_ids || []),\n                  message_from_child?.external_process_id,\n                ];\n                // NOTE: Also track external process IDs for cleanup\n                process_ids.push(message_from_child?.external_process_id);\n              }\n            });\n            \n            test_app_server.on('error', (error) => {\n              // NOTE: Suppress test server errors to avoid noise\n            });\n            \n            test_app_server.stdout.on(\"data\", async (data) => {\n              // NOTE: Suppress test server output to avoid noise\n            });\n            \n            test_app_server.stderr.on(\"data\", (data) => {\n              // NOTE: Suppress test server errors to avoid noise\n            });\n          } catch (error) {\n            console.error('Error starting test server after database installation:', error);\n          }\n        });\n      } catch (error) {\n        console.error('Error starting test server:', error);\n      }\n    }, 100); // Small delay to let main server start first\n  }\n\n  // NOTE: Only set up file watching for non-test servers\n  if (!development_server_options?._is_test_server) {\n    watch_for_changes({\n      hot_module_reload: (jobs = []) => handle_signal_hmr_update(jobs),\n      restart_app_server: () => handle_restart_app_server(\n        node_major_version,\n        development_server_options?.watch,\n        main_settings,\n        development_server_options?.imports,\n        development_server_options?.tests,\n      ),\n      start_app_server: () => handle_start_app_server(\n        node_major_version,\n        development_server_options?.watch,\n        development_server_options?.imports,\n        development_server_options?.tests,\n        development_server_options?._is_test_server,\n        main_app_env_options,\n      ),\n      start_hmr_server: development_server_options?.environment !== 'test' ? () => handle_start_hmr_server(\n        node_major_version,\n        __dirname,\n        development_server_options?.watch,\n        main_settings,\n        development_server_options?.imports,\n        development_server_options?.tests,\n      ) : null,\n      run_tests: development_server_options?.tests ? async () => {\n        // NOTE: Add delay to avoid jarring UX when test files change\n        setTimeout(async () => {\n          try {\n            await run_tests_integrated({\n              __dirname,\n            });\n          } catch (error) {\n            console.error('Error running tests after file change:', error);\n          }\n        }, 2000);\n      } : null,\n    }, {\n      excluded_paths: main_settings?.config?.build?.excluded_paths,\n      custom_copy_paths: main_settings?.config?.build?.copy_paths?.map((path) => {\n        return { path };\n      }) || [],\n    });\n  } else {\n    // NOTE: For test server, just start the app server without file watching\n    handle_start_app_server(\n      node_major_version,\n      false, // No file watching for test server\n      development_server_options?.imports || [],\n      false, // No integrated tests for test server\n      true, // This is a test server\n    );\n  }\n\n  handle_signal_events(process_ids, node_major_version, __dirname);\n};\n\nexport default development_server;\n"],
  "mappings": "AAAA,OAAOA,MAAW,QAClB,OAAOC,MAAmB,gBAC1B,OAAOC,MAAQ,KACf,MAAe,KACf,OAAOC,GAAQ,WAAAC,MAAe,OAC9B,OAAS,iBAAAC,MAAqB,MAC9B,OAAOC,MAAU,OACjB,OAAOC,MAA4B,8BACnC,OAAOC,MAAa,gBACpB,OAAOC,MAA8B,gCACpC,OAAOC,MAA4B,+BACpC,OAAOC,MAAuB,0BAC9B,OAAOC,MAAmB,sBAC1B,OAAOC,MAAY,eACnB,OAAOC,MAAiB,oBACxB,OAAOC,MAAoB,uBAC3B,OAAOC,MAAsB,wBAC7B,OAAOC,MAAqB,uBAC5B,OAAOC,MAAsB,wBAC7B,OAAOC,MAAuB,+BAC9B,OAAOC,MAAe,kBACtB,OAAOC,MAAsB,wBAC7B,OAAOC,GAAa,wBAAAC,MAA4B,iBAChD,OAAOC,MAAc,iBACrB,OAAOC,MAA8B,0CAErC,KAAM,CAAE,KAAAC,CAAK,EAAIxB,EAAG,SACdyB,EAAOrB,EAAK,UAAUL,EAAc,IAAI,EAExC2B,EAAqB,SACzB,SAAS,SAAS,MAAM,GAAG,EAAE,CAAC,GAAG,QAAQ,IAAK,EAAE,EAChD,EACF,EAEMC,EAAaxB,EAAc,YAAY,GAAG,EAC1CyB,EAAY1B,EAAQyB,CAAU,EAE9BE,EAAc,CAAC,EAEfC,EAAmB,MAAOC,EAAQ,KAAU,CAChD,MAAMC,EAAuBzB,EAAyB,EACtD,MAAMa,EAAU,CACd,MAAAW,EACA,UAAAH,EACA,YAAa,CACX,GAAGC,EACH,GAAGG,CACL,EACA,gBAAiB,QAAQ,eAC3B,CAAC,CACH,EAEMC,EAAuB,CAACJ,EAAc,CAAC,EAAGH,EAAqB,EAAGE,EAAY,KAAO,CACzF,MAAMM,EAAY,CAAC,eAAe,EAE9BR,EAAqB,IACvBQ,EAAU,KAAK,0CAA0C,EAG3D,MAAMC,EAAkBpC,EAAc,KACpCE,EAAK,QAAQ,GAAG2B,CAAS,aAAa,EACtC,CAAC,EACD,CAGE,SAAU,GACV,OAAQ,EACV,CACF,EAEA,QAAQ,gBAAkBO,EAE1B,QAAQ,GAAG,SAAU,SAAY,CAC/B,MAAMH,EAAuBzB,EAAyB,EACtD4B,EAAgB,KAAK,KAAK,UAAW,CAAE,YAAa,CAAC,GAAGN,EAAa,GAAGG,CAAoB,CAAE,CAAE,CAAC,EACjG,QAAQ,KAAK,CACf,CAAC,EAED,QAAQ,GAAG,UAAW,SAAY,CAChC,MAAMA,EAAuBzB,EAAyB,EACtD4B,EAAgB,KAAK,KAAK,UAAW,CAAE,YAAa,CAAC,GAAGN,EAAa,GAAGG,CAAoB,CAAE,CAAE,CAAC,EACjG,QAAQ,KAAK,CACf,CAAC,CACH,EAEMI,EAA2B,MAAOC,EAAO,CAAC,IAAM,CACpD,MAAMC,EAAsBD,GAAM,KAAME,GAASA,GAAK,MAAM,MAAMrB,EAAU,wBAAwB,GAAI,OAAS,CAAC,EAC5GsB,EAAkBH,GAAM,KAAME,GAAQA,GAAK,MAAM,SAAS,MAAM,CAAC,EACjEE,EAAwBJ,GAAM,KAAME,GAAQA,GAAK,MAAM,SAAS,YAAY,CAAC,EAC7EG,EAAuBL,GAAM,KAAME,GAChCA,GAAK,MAAM,SAAS,WAAW,GAAKA,GAAK,MAAM,SAAS,MAAM,CACtE,EACKI,EAA0BN,GAAM,KAAME,GAAQA,GAAK,MAAM,SAAS,iBAAiB,CAAC,EAE1F,QAAQ,mBAAmB,KAAK,KAAK,UAAU,CAC7C,KAAM,cACN,SAAUD,GAAuB,MAAM5B,EAAc,QAAQ,IAAI,QAAQ,GAAG,SAAW,KACvF,YAAa,CAAC,CAAC8B,EACf,kBAAmB,CAAC,CAACC,EACrB,iBAAkB,CAAC,CAACC,EACpB,oBAAqB,CAAC,CAACC,CACzB,CAAC,CAAC,CACJ,EAEMC,EAAqC,CAAClB,EAAqB,EAAGK,EAAQ,GAAOc,EAAe,CAAC,EAAGC,EAAU,CAAC,EAAGC,EAAuB,KAAU,CACnJ,QAAQ,mBAAmB,GAAG,UAAW,MAAOC,GAAY,CACjC,CACvB,sBACA,yBACA,qBACF,EAEsB,SAASA,GAAS,IAAI,GAC1C,QAAQ,OAAO,MAAMA,CAAO,EAG1BA,GAAS,OAAS,wBACpB,QAAQ,mBAAmB,gBAAkB,IAG3CA,GAAS,OAAS,2BACpB,QAAQ,mBAAmB,gBAAkB,IAG3CA,GAAS,OAAS,uBAChB,QAAQ,oBAAsB,CAAC,QAAQ,wBACzC,QAAQ,sBAAwB,GAChCC,EAA0BvB,EAAoBK,EAAOc,EAAcC,EAASC,CAAoB,EAGtG,CAAC,CACH,EAEMG,EAAkC,IAAM,CAC5C,QAAQ,mBAAmB,GAAG,QAAUC,GAAU,CAChD7C,EAAQ6C,EAAM,SAAS,EAAG,CACxB,MAAO,SACP,KAAM,uCACR,CAAC,CACH,CAAC,EAED,QAAQ,mBAAmB,OAAO,GAAG,OAASC,GAAS,CACrD,QAAQ,IAAIA,EAAK,SAAS,CAAC,CAC7B,CAAC,EAED,QAAQ,mBAAmB,OAAO,GAAG,OAASA,GAAS,CACrD9C,EAAQ8C,EAAK,SAAS,EAAG,CACvB,MAAO,SACP,KAAM,uCACR,CAAC,CACH,CAAC,CACH,EAEMC,EAA0B,CAAC3B,EAAqB,EAAGE,EAAY,GAAIG,EAAQ,GAAOc,EAAe,CAAC,EAAGC,EAAU,CAAC,EAAGC,EAAuB,KAAU,CACzJ,QAAQ,mBAAqB/B,EAAiBU,EAAoBE,CAAS,EAC1EC,EAAY,KAAK,QAAQ,oBAAoB,GAAG,EAChDqB,EAAgC,EAChCN,EAAmClB,EAAoBK,EAAOc,EAAcC,EAASC,CAAoB,CAC3G,EAEMO,GAA4B,MAAOT,EAAe,CAAC,IAAM,CAC7D,KAAM,CAAE,SAAUU,CAAa,EAAI,MAAM7C,EAAc,QAAQ,IAAI,QAAQ,EACrE8C,EAAuBD,GAAc,QAAQ,UAAY,KAAK,UAAUA,GAAc,QAAQ,SAAS,EAAI,GAC3GE,EAAwBZ,GAAc,QAAQ,UAAY,KAAK,UAAUA,GAAc,QAAQ,SAAS,EAAI,GAClH,OAAOW,IAAyBC,CAClC,EAEMR,EAA4B,MAAOvB,EAAqB,EAAGK,EAAQ,GAAOc,EAAe,KAAMC,EAAU,CAAC,EAAGC,EAAuB,KAAU,CAClJzB,EAAS,SAAY,CAGnB,GAF6B,MAAMgC,GAA0BT,CAAY,EAE/C,CACxB,MAAMb,EAAuBzB,EAAyB,EAEtDD,EAAQ,kDAAkD,QAAQ,IAAI,QAAQ,sEAAuE,CACnJ,MAAO,SACP,KAAM,8CACR,CAAC,EAEDa,EAAiB,CACf,QAAQ,oBAAoB,IAC5B,QAAQ,oBAAoB,IAC5B,GAAGa,CACL,CAAC,EAED,QAAQ,KAAK,CAAC,CAChB,MACEb,EAAiB,CACf,GAAI,QAAQ,mBAAmB,sBAAwB,CAAC,CAC1D,CAAC,EAED,MAAMV,EAAkB,QAAQ,IAAI,IAAI,EACxCiD,EAAwBhC,EAAoBK,EAAOe,EAASC,CAAoB,CAEpF,EAAG,GAAG,CACR,EAEMY,GAAkC,CAAC5B,EAAQ,GAAOgB,EAAuB,GAAOa,EAAiB,KAAU,CAE/G,QAAQ,mBAAmB,qBAAuB,CAAC,EAEnD,QAAQ,mBAAmB,GAAG,UAAYC,GAAuB,CAC3DA,GAAoB,sBACtB,QAAQ,mBAAmB,qBAAuB,CAChD,GAAI,QAAQ,mBAAmB,sBAAwB,CAAC,EACxDA,GAAoB,mBACtB,EAEJ,CAAC,EAED,QAAQ,mBAAmB,GAAG,QAAUV,GAAU,CAC3CS,GACHtD,EAAQ6C,EAAM,SAAS,EAAG,CACxB,MAAO,SACP,KAAM,uCACR,CAAC,CAEL,CAAC,EAED,QAAQ,mBAAmB,OAAO,GAAG,OAAQ,MAAOC,GAAS,CAC5D,MAAMU,EAASV,EAAK,SAAS,EACtBW,EAA0BD,EAAO,SAAS,iBAAiB,EAGjE,GAAIF,EAAgB,CAClB,QAAQ,OAAO,MAAME,CAAM,EAC3B,MACF,CAGGA,GAAUC,GAA2B,QAAQ,IAAI,WAAa,QACjE,QAAQ,OAAO,MAAMD,CAAM,EAGvBA,GAAU,CAACC,GAA2B,CAACD,EAAO,SAAS,aAAa,GACtE,QAAQ,IAAIA,CAAM,EAKhBA,GAAUC,GAA2B,QAAQ,IAAI,WAAa,QAChEjC,EAAiBC,CAAK,EAIpB+B,GAAUC,GAA2BhB,GAAwB,QAAQ,IAAI,WAAa,QAExF,WAAW,SAAY,CACrB,GAAI,CACF,MAAM1B,EAAqB,CACzB,UAAAO,CACF,CAAC,CACH,OAASuB,EAAO,CACd,QAAQ,MAAM,kCAAmCA,CAAK,CACxD,CACF,EAAG,GAAI,CAEX,CAAC,EAED,QAAQ,mBAAmB,OAAO,GAAG,OAASC,GAAS,CAEnD9C,EAAQ8C,EAAK,SAAS,EAAG,CACvB,MAAO,SACP,KAAM,oCACR,CAAC,CAEL,CAAC,CACH,EAEMM,EAA0B,CAAChC,EAAqB,EAAGK,EAAQ,GAAOe,EAAU,CAAC,EAAGC,EAAuB,GAAOa,EAAiB,GAAOI,EAAc,CAAC,IAAM,CAChK,QAAQ,mBAAqBlD,EAAiBY,EAAoBK,EAAOe,EAASkB,CAAW,EAC5FnC,EAAY,KAAK,QAAQ,oBAAoB,GAAG,EAChD8B,GAAgC5B,EAAOgB,EAAsBa,CAAc,EAC3E,QAAQ,sBAAwB,EAClC,EAEMK,EAA4B,MAAOC,EAAW,CAAC,EAAGC,EAAW,OAAS,CAC1E,MAAMC,EAAqBF,GAAU,QAAQ,WAAW,IAAI,CAACG,EAAW,CAAC,IAChEA,GAAU,QAClB,EAED,QAASC,EAAI,EAAGA,EAAIF,GAAoB,OAAQE,GAAK,EAAG,CACtD,MAAMC,EAAgBH,EAAmBE,CAAC,EAC1C,MAAM/C,EAAyBgD,CAAa,CAC9C,CAEA,GAAIJ,EAAU,CAEZ,MAAMK,EAAYJ,GAAoB,OAAS,EAAI,IAAO,EAC1D,WAAWD,EAAUK,CAAS,CAChC,CACF,EAEMC,GAAwB,CAACC,EAA6B,CAAC,EAAGC,EAAO,OAAS,CAC9E,QAAQ,MAAQD,GAA4B,cAAgB,OAAS,gBAAkB,WACvF,QAAQ,eAAiBzE,EAAK,SAAS,QAAQ,IAAI,CAAC,EACpD,QAAQ,OAAS,IAAIU,EAEjB+D,GAA4B,cAAgB,SAC9C,QAAQ,IAAI,EAAE,EACd,QAAQ,OAAO,MAAM;AAAA,CAAoC,GAG3D,QAAQ,IAAI,UAAYA,GAA4B,MAAQ,KAC5D,QAAQ,IAAI,SAAWA,GAA4B,aAAe,cAClE,QAAQ,IAAI,KAAOC,EACnB,QAAQ,IAAI,cAAgBD,GAA4B,KAC1D,EAEME,GAAyB,CAACD,EAAO,OAAS,CAC9CrE,EAAQ,QAAQqE,CAAI,gFAAiF,CACnG,MAAO,QACT,CAAC,EAED,QAAQ,KAAK,CAAC,CAChB,EAEME,GAAW,CAACF,EAAO,OACjB,SAASA,GAAQ,KAAM,EAAE,EAG3BG,GAA0B,SAAY,CAC3C,MAAMC,EAAavE,EAAuB,GAAG,QAAQ,IAAI,CAAC,kBAAkB,EAExE,MAAMI,EAAYmE,CAAU,GAC/B,MAAMtD,EAAK,GAAG,QAAQ,WAAa,QAAU,cAAgB,QAAQ,IAAIsD,CAAU,EAAE,CAEvF,EAEMC,GAA2B,SAAY,CAC3C,MAAMC,EAAgB,CAAC,EAEvB,QAASX,EAAI,EAAGA,EAAIzD,GAAgB,OAAQyD,GAAK,EAAG,CAClD,MAAMY,EAAgBrE,EAAeyD,CAAC,EAChCa,EAAS,MAAMvE,EAAY,GAAG,QAAQ,IAAI,CAAC,IAAIsE,EAAc,IAAI,EAAE,EACnEE,EAAQD,GAAU,MAAM3D,EAAK,GAAG,QAAQ,IAAI,CAAC,IAAI0D,EAAc,IAAI,EAAE,EAEvEA,GAAiBA,EAAc,OAAS,SAAW,CAACC,GAAWA,GAAU,CAACC,EAAM,OAAO,IACzFH,EAAc,KAAK,CAAE,KAAM,OAAQ,KAAMC,EAAc,IAAK,CAAC,EAG3DA,GAAiBA,EAAc,OAAS,cAAgB,CAACC,GAAWA,GAAU,CAACC,EAAM,YAAY,IACnGH,EAAc,KAAK,CAAE,KAAM,YAAa,KAAMC,EAAc,IAAK,CAAC,CAEtE,CAEA,GAAID,GAAe,OAAS,EAAG,CAC7B,MAAMI,EAAQJ,GAAe,OAAQhF,GAASA,EAAK,OAAS,MAAM,EAC5DqF,EAAcL,GAAe,OAAQhF,GAASA,EAAK,OAAS,WAAW,EAE7E,IAAIkD,EAAQ;AAAA;AAAA,EAEZ,GAAIkC,GAAO,OAAS,EAAG,CACrBlC,GAAS,KAAKrD,EAAM,OAAO,GAAG,CAAC;AAAA;AAAA,EAE/B,QAASwE,EAAI,EAAGA,EAAIe,GAAO,OAAQf,GAAK,EAAG,CACzC,MAAMiB,EAAOF,EAAMf,CAAC,EACdkB,EAAelB,EAAG,IAAMe,GAAO,OACrClC,GAAS,KAAKrD,EAAM,IAAI,IAAIyF,EAAK,IAAI;AAAA,EAAKC,GAAgBF,GAAa,OAAS,EAAI;AAAA,EAAO,EAAE,EAAE,CAAC,EAClG,CACF,CAEA,GAAIA,GAAa,OAAS,EAAG,CAC3BnC,GAAS,KAAKrD,EAAM,OAAO,GAAG,CAAC;AAAA;AAAA,EAE/B,QAASwE,EAAI,EAAGA,EAAIgB,GAAa,OAAQhB,GAAK,EAAG,CAC/C,MAAMiB,EAAOD,EAAYhB,CAAC,EAC1BnB,GAAS,KAAKrD,EAAM,IAAI,IAAIyF,EAAK,IAAI;AAAA,CAAI,CAAC,EAC5C,CACF,CAEAjF,EAAQ6C,EAAO,CACb,MAAO,SACP,KAAM,8CACR,CAAC,EAED,QAAQ,KAAK,CAAC,CAChB,CACF,EAEMsC,GAAoC,SAAY,CACpD,MAAMC,EAAsB,MAAM9E,EAAY,GAAG,QAAQ,IAAI,CAAC,YAAY,EACpE+E,EAAmB,MAAM/E,EAAY,GAAG,QAAQ,IAAI,CAAC,QAAQ,EAE/D,QAAQ,IAAI,WAAa,SAAW,CAAC8E,GAAuB,CAACC,KAC/DrF,EACE,qFACA,CACE,MAAO,SACP,KAAM,6CACR,CACF,EAEA,QAAQ,KAAK,CAAC,GAGZ,QAAQ,IAAI,WAAa,QAAU,CAACoF,IACtCpF,EACE,qEACA,CACE,MAAO,SACP,KAAM,8CACR,CACF,EAEA,QAAQ,KAAK,CAAC,EAElB,EAEMsF,GAAqB,MAAOlB,EAA6B,CAAC,IAAM,CACpE,MAAMe,GAAkC,EACxC,MAAMT,GAAyB,EAEhC,MAAMF,GAAwB,EAE9B,MAAMH,EAAOE,GAASH,GAA4B,IAAI,EAChDmB,EAAoB,MAAMxF,EAAuBsE,CAAI,EACpDmB,EAAoB,MAAMzF,EAAuBsE,EAAO,CAAC,EAE3DkB,GACHjB,GAAuBD,CAAI,EAGxBmB,GACHrF,EAAkBkE,CAAI,EAGvBF,GAAsBC,EAA4BC,CAAI,EAGtD,IAAIoB,EAAeC,EACnB,GAAItB,GAA4B,OAASA,GAA4B,cAAgB,OAAQ,CAE3F,MAAMuB,EAAuB,MAAMvF,EAAc,QAAQ,IAAI,SAAU,CAAE,gBAAiB,EAAK,CAAC,EAChGqF,EAAgBE,EAAqB,SACrCD,EAAoBC,EAAqB,YAC3C,KAAO,CAEL,MAAMC,EAAkB,MAAMxF,EAAc,QAAQ,IAAI,QAAQ,EAChEqF,EAAgBG,EAAgB,SAChCF,EAAoBE,EAAgB,YACtC,CAEA,MAAMjC,EAA0B8B,CAAa,EAE7C,MAAMhF,EAAgB,CACpB,YAAa,QAAQ,IAAI,SACzB,KAAA4D,EACA,SAAUoB,CACZ,CAAC,EAGD,MAAMI,EAAuBzB,GAA4B,OAASA,GAA4B,cAAgB,OAC1G,CAAE,kBAAmBsB,CAAkB,EACvC,CAAC,EAGDtB,GAA4B,OAASA,GAA4B,cAAgB,SACxD,MAAMrE,EAAuB,IAAI,GAE1D,MAAMI,EAAkB,IAAI,EAI9B,WAAW,SAAY,CACrB,GAAI,CAEF,MAAM2F,EAAuB,MAAM1F,EAAc,OAAQ,CAAE,gBAAiB,EAAK,CAAC,EAC5E2F,EAAgBD,EAAqB,SACrCE,EAAoBF,EAAqB,aAG/C,MAAMnC,EAA0BoC,EAAe,SAAY,CACzD,GAAI,CACF,MAAMtF,EAAgB,CACpB,YAAa,OACb,KAAM,KACN,SAAUsF,CACZ,CAAC,EAED,MAAME,EAAkBzF,EAAiBY,EAAoB,GAAOgD,GAA4B,SAAW,CAAC,EAAG,CAC7G,SAAU,OACV,KAAM,KACN,UAAW,QAAQ,IAAI,UACvB,SAAU,QAAQ,IAAI,SACtB,kBAAmB4B,CACrB,CAAC,EAEDzE,EAAY,KAAK0E,GAAiB,GAAG,EAGrC,QAAQ,wBAA0BA,EAGlCA,EAAgB,qBAAuB,CAAC,EAExCA,EAAgB,GAAG,UAAY1C,GAAuB,CAChDA,GAAoB,sBACtB0C,EAAgB,qBAAuB,CACrC,GAAIA,EAAgB,sBAAwB,CAAC,EAC7C1C,GAAoB,mBACtB,EAEAhC,EAAY,KAAKgC,GAAoB,mBAAmB,EAE5D,CAAC,EAED0C,EAAgB,GAAG,QAAUpD,GAAU,CAEvC,CAAC,EAEDoD,EAAgB,OAAO,GAAG,OAAQ,MAAOnD,GAAS,CAElD,CAAC,EAEDmD,EAAgB,OAAO,GAAG,OAASnD,GAAS,CAE5C,CAAC,CACH,OAASD,EAAO,CACd,QAAQ,MAAM,0DAA2DA,CAAK,CAChF,CACF,CAAC,CACH,OAASA,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,CACF,EAAG,GAAG,GAIHuB,GAA4B,gBA8C/BhB,EACEhC,EACA,GACAgD,GAA4B,SAAW,CAAC,EACxC,GACA,EACF,EAnDAzD,EAAkB,CAChB,kBAAmB,CAACoB,EAAO,CAAC,IAAMD,EAAyBC,CAAI,EAC/D,mBAAoB,IAAMY,EACxBvB,EACAgD,GAA4B,MAC5BqB,EACArB,GAA4B,QAC5BA,GAA4B,KAC9B,EACA,iBAAkB,IAAMhB,EACtBhC,EACAgD,GAA4B,MAC5BA,GAA4B,QAC5BA,GAA4B,MAC5BA,GAA4B,gBAC5ByB,CACF,EACA,iBAAkBzB,GAA4B,cAAgB,OAAS,IAAMrB,EAC3E3B,EACAE,EACA8C,GAA4B,MAC5BqB,EACArB,GAA4B,QAC5BA,GAA4B,KAC9B,EAAI,KACJ,UAAWA,GAA4B,MAAQ,SAAY,CAEzD,WAAW,SAAY,CACrB,GAAI,CACF,MAAMrD,EAAqB,CACzB,UAAAO,CACF,CAAC,CACH,OAASuB,EAAO,CACd,QAAQ,MAAM,yCAA0CA,CAAK,CAC/D,CACF,EAAG,GAAI,CACT,EAAI,IACN,EAAG,CACD,eAAgB4C,GAAe,QAAQ,OAAO,eAC9C,kBAAmBA,GAAe,QAAQ,OAAO,YAAY,IAAK9F,IACzD,CAAE,KAAAA,CAAK,EACf,GAAK,CAAC,CACT,CAAC,EAYHgC,EAAqBJ,EAAaH,EAAoBE,CAAS,CACjE,EAEA,IAAO4E,GAAQZ",
  "names": ["chalk", "child_process", "fs", "path", "dirname", "fileURLToPath", "util", "check_if_port_occupied", "cli_log", "get_database_process_ids", "get_platform_safe_path", "kill_port_process", "load_settings", "Loader", "path_exists", "required_files", "start_app_server", "start_databases", "start_hmr_server", "watch_for_changes", "constants", "kill_process_ids", "run_tests", "run_tests_integrated", "debounce", "download_database_binary", "stat", "exec", "node_major_version", "__filename", "__dirname", "process_ids", "handle_run_tests", "watch", "database_process_ids", "handle_signal_events", "exec_argv", "cleanup_process", "handle_signal_hmr_update", "jobs", "has_settings_change", "job", "has_i18n_change", "has_index_html_change", "has_index_css_change", "has_index_client_change", "handle_hmr_server_process_messages", "old_settings", "imports", "run_integrated_tests", "message", "handle_restart_app_server", "handle_hmr_server_process_stdio", "error", "data", "handle_start_hmr_server", "check_if_database_changes", "new_settings", "new_databse_settings", "old_database_settings", "handle_start_app_server", "handle_app_server_process_stdio", "is_test_server", "message_from_child", "stdout", "is_startup_notification", "env_options", "install_missing_databases", "settings", "callback", "required_databases", "database", "i", "provider_name", "wait_time", "set_process_variables", "development_server_options", "port", "warn_app_port_occupied", "get_port", "clean_up_existing_build", "build_path", "check_for_required_files", "missing_files", "required_file", "exists", "stats", "files", "directories", "file", "is_last_file", "warn_invalid_joystick_environment", "has_joystick_folder", "has_tests_folder", "development_server", "app_port_occupied", "hmr_port_occupied", "main_settings", "main_raw_settings", "main_settings_result", "settings_result", "main_app_env_options", "test_settings_result", "test_settings", "test_raw_settings", "test_app_server", "index_default"]
}
