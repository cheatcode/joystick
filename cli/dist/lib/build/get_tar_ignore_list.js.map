{
  "version": 3,
  "sources": ["../../../src/lib/build/get_tar_ignore_list.js"],
  "sourcesContent": ["import fs from \"fs\";\nimport master_ignore_list from \"./master_ignore_list.js\";\n\nconst get_tar_ignore_list = (excluded_paths = []) => {\n  const git_ignore = fs.existsSync(\".gitignore\")\n    ? fs.readFileSync(\".gitignore\", \"utf-8\")\n    : \"\";\n    \n  const git_ignore_files = git_ignore?.split(\"\\n\")?.filter((file) => {\n    return !file?.includes(\"#\") && file?.trim() !== \"\";\n  });\n\n  // NOTE: The ^ character is an anchor to tell tar to only match the pattern\n  // to the root path. Without this, it will match all nested paths that resemble\n  // the pattern you give it. For example, ./versions will match the api/versions\n  // directory too.\n  const files_to_ignore = [\n    ...(git_ignore_files || [])?.map((ignore) => {\n      return `^${ignore}`;\n    }),\n    ...(excluded_paths || [])?.map((ignore) => {\n      return `^${ignore}`;\n    }),\n    ...(master_ignore_list || [])?.map((ignore) => {\n      return `^${ignore}`;\n    }),\n    \"*.tar\",\n    \"*.tar.gz\",\n    \"*.tar.xz\",\n  ]?.filter((item, itemIndex, array) => {\n    return array.indexOf(item) === itemIndex;\n  });\n\n  const exclude_list = `{${files_to_ignore\n    ?.map((file_to_ignore) => `\"${file_to_ignore}\"`)\n    .join(\",\")}}`;\n\n  return exclude_list;\n};\n\nexport default get_tar_ignore_list;\n"],
  "mappings": "AAAA,OAAOA,MAAQ,KACf,OAAOC,MAAwB,0BAE/B,MAAMC,EAAsB,CAACC,EAAiB,CAAC,IA8BxB,IAjBG,CACtB,KAbiBH,EAAG,WAAW,YAAY,EACzCA,EAAG,aAAa,aAAc,OAAO,EACrC,KAEiC,MAAM;AAAA,CAAI,GAAG,OAAQI,GACjD,CAACA,GAAM,SAAS,GAAG,GAAKA,GAAM,KAAK,IAAM,EACjD,GAOyB,CAAC,IAAI,IAAKC,GACzB,IAAIA,CAAM,EAClB,EACD,IAAIF,GAAkB,CAAC,IAAI,IAAKE,GACvB,IAAIA,CAAM,EAClB,EACD,IAAIJ,GAAsB,CAAC,IAAI,IAAKI,GAC3B,IAAIA,CAAM,EAClB,EACD,QACA,WACA,UACF,EAAG,OAAO,CAACC,EAAMC,EAAWC,IACnBA,EAAM,QAAQF,CAAI,IAAMC,CAChC,GAGG,IAAKE,GAAmB,IAAIA,CAAc,GAAG,EAC9C,KAAK,GAAG,CAAC,IAKd,IAAOC,EAAQR",
  "names": ["fs", "master_ignore_list", "get_tar_ignore_list", "excluded_paths", "file", "ignore", "item", "itemIndex", "array", "file_to_ignore", "get_tar_ignore_list_default"]
}
