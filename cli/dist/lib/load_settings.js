import a from"fs";import n from"./cli_log.js";import c from"./is_valid_json_string.js";import l from"./path_exists.js";const{readFile:f}=a.promises,g=async(t=null,r={})=>{const e=`${process.cwd()}/settings.${t}.json`;await l(e)||(n(`A settings file could not be found for this environment (${t}). Create a settings.${t}.json file at the root of your project and restart Joystick.`,{level:"danger",docs:"https://github.com/cheatcode/joystick#settings"}),process.exit(0));const o=await f(e,"utf-8"),i=c(o);i||(n(`Failed to parse settings file. Double-check the syntax in your settings.${t}.json file at the root of your project and restart Joystick.`,{level:"danger",docs:"https://github.com/cheatcode/joystick#settings",tools:[{title:"JSON Linter",url:"https://jsonlint.com/"}]}),process.exit(0));const s=i?o:"{}";return r.skip_global_env||(process.env.JOYSTICK_SETTINGS=s),{settings:JSON.parse(s),raw_settings:s}};var j=g;export{j as default};
//# sourceMappingURL=load_settings.js.map
