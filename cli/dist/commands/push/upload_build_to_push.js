import d from"node-fetch";import n from"form-data";import m from"fs";import"lodash";const{readFile:r}=m.promises,p=async(e={})=>{const t=new n;return t.append("version_tar",await r(".build/build.encrypted.tar.gz"),`${e?.build_timestamp}.tar.gz`),t.append("build_timestamp",e?.build_timestamp),t.append("domain",e?.deployment?.domain),t.append("deployment_id",e?.deployment?._id),t.append("settings",JSON.stringify(e?.settings)),d(`${e?.push_domain}/api/deploy`,{method:"POST",headers:{...t.getHeaders(),"x-push-deployment-token":e?.deployment_token},body:t}).then(async a=>(await a.json())?.data).catch(a=>{console.warn(a)})};var c=p;export{c as default};
//# sourceMappingURL=upload_build_to_push.js.map
