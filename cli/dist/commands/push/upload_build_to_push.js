import n from"node-fetch";import m from"form-data";import o from"fs";import"lodash";const{readFile:r}=o.promises,p=async(t={})=>{const e=new m;return e.append("version_tar",await r(".build/build.encrypted.tar.gz"),`${t?.build_timestamp}.tar.gz`),e.append("build_timestamp",t?.build_timestamp),e.append("domain",t?.deployment?.domain),e.append("deployment_id",t?.deployment?._id),e.append("settings",JSON.stringify(t?.settings)),n(`${t?.push_domain}/api/deploy`,{method:"POST",headers:{...e.getHeaders(),"x-push-deployment-token":t?.deployment_token},body:e}).then(async a=>{const d=await a.text();return console.log(d),(await a.json())?.data}).catch(a=>{console.warn(a)})};var y=p;export{y as default};
//# sourceMappingURL=upload_build_to_push.js.map
