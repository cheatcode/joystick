{
  "version": 3,
  "sources": ["../../../src/commands/use/index.js"],
  "sourcesContent": ["import child_process from \"child_process\";\nimport util from 'util';\nimport Loader from '../../lib/loader.js';\nimport replace_in_files from '../../lib/replace_in_files.js';\n\nconst exec = util.promisify(child_process.exec);\n\nconst use = async (args = {}, options = {}) => {\n  const loader = new Loader();\n\n  if (args?.release === 'canary') {\n    await replace_in_files(process.cwd(), {\n      match: [/\\.js$/],\n      exclude: [/node_modules/],\n      replace_regex: /(@joystick\\.js\\/node)(?!-)/g,\n      replace_with: '@joystick.js/node-canary',\n    });\n\n    await replace_in_files(process.cwd(), {\n      match: [/\\.js$/],\n      exclude: [/node_modules/],\n      replace_regex: /(@joystick\\.js\\/ui)(?!-)/g,\n      replace_with: '@joystick.js/ui-canary',\n    });\n\n    await replace_in_files(process.cwd(), {\n      match: [/\\.js$/],\n      exclude: [/node_modules/],\n      replace_regex: /(@joystick\\.js\\/test)(?!-)/g,\n      replace_with: '@joystick.js/test-canary',\n    });\n    \n    loader.print('Swapping production packages for canary versions...');\n    \n    await exec('npm uninstall @joystick.js/node && npm i @joystick.js/node-canary');\n    await exec('npm uninstall @joystick.js/ui && npm i @joystick.js/ui-canary');\n    await exec('npm uninstall @joystick.js/test && npm i @joystick.js/test-canary');\n  }\n  \n  if (args?.release === 'production') {\n    await replace_in_files(process.cwd(), {\n      match: [/\\.js$/],\n      exclude: [/node_modules/],\n      replace_regex: /(@joystick\\.js\\/node-canary)/g,\n      replace_with: '@joystick.js/node',\n    });\n\n    await replace_in_files(process.cwd(), {\n      match: [/\\.js$/],\n      exclude: [/node_modules/],\n      replace_regex: /(@joystick.js\\/ui-canary)/g,\n      replace_with: '@joystick.js/ui',\n    });\n\n    await replace_in_files(process.cwd(), {\n      match: [/\\.js$/],\n      exclude: [/node_modules/],\n      replace_regex: /(@joystick\\.js\\/test-canary)/g,\n      replace_with: '@joystick.js/test',\n    });\n    \n    loader.print('Swapping canary packages for production versions...');\n    \n    await exec('npm uninstall @joystick.js/node-canary && npm i @joystick.js/node');\n    await exec('npm uninstall @joystick.js/ui-canary && npm i @joystick.js/ui');\n    await exec('npm uninstall @joystick.js/test-canary && npm i @joystick.js/test');\n  }\n};\n\nexport default use;\n"],
  "mappings": "AAAA,OAAOA,MAAmB,gBAC1B,OAAOC,MAAU,OACjB,OAAOC,MAAY,sBACnB,OAAOC,MAAsB,gCAE7B,MAAMC,EAAOH,EAAK,UAAUD,EAAc,IAAI,EAExCK,EAAM,MAAOC,EAAO,CAAC,EAAGC,EAAU,CAAC,IAAM,CAC7C,MAAMC,EAAS,IAAIN,EAEfI,GAAM,UAAY,WACpB,MAAMH,EAAiB,QAAQ,IAAI,EAAG,CACpC,MAAO,CAAC,OAAO,EACf,QAAS,CAAC,cAAc,EACxB,cAAe,8BACf,aAAc,0BAChB,CAAC,EAED,MAAMA,EAAiB,QAAQ,IAAI,EAAG,CACpC,MAAO,CAAC,OAAO,EACf,QAAS,CAAC,cAAc,EACxB,cAAe,4BACf,aAAc,wBAChB,CAAC,EAED,MAAMA,EAAiB,QAAQ,IAAI,EAAG,CACpC,MAAO,CAAC,OAAO,EACf,QAAS,CAAC,cAAc,EACxB,cAAe,8BACf,aAAc,0BAChB,CAAC,EAEDK,EAAO,MAAM,qDAAqD,EAElE,MAAMJ,EAAK,mEAAmE,EAC9E,MAAMA,EAAK,+DAA+D,EAC1E,MAAMA,EAAK,mEAAmE,GAG5EE,GAAM,UAAY,eACpB,MAAMH,EAAiB,QAAQ,IAAI,EAAG,CACpC,MAAO,CAAC,OAAO,EACf,QAAS,CAAC,cAAc,EACxB,cAAe,gCACf,aAAc,mBAChB,CAAC,EAED,MAAMA,EAAiB,QAAQ,IAAI,EAAG,CACpC,MAAO,CAAC,OAAO,EACf,QAAS,CAAC,cAAc,EACxB,cAAe,6BACf,aAAc,iBAChB,CAAC,EAED,MAAMA,EAAiB,QAAQ,IAAI,EAAG,CACpC,MAAO,CAAC,OAAO,EACf,QAAS,CAAC,cAAc,EACxB,cAAe,gCACf,aAAc,mBAChB,CAAC,EAEDK,EAAO,MAAM,qDAAqD,EAElE,MAAMJ,EAAK,mEAAmE,EAC9E,MAAMA,EAAK,+DAA+D,EAC1E,MAAMA,EAAK,mEAAmE,EAElF,EAEA,IAAOK,EAAQJ",
  "names": ["child_process", "util", "Loader", "replace_in_files", "exec", "use", "args", "options", "loader", "index_default"]
}
