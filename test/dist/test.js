import r from"ava";import o from"node-fetch";let a=[];class u{constructor(){}async signupUser(e=[]){for(let t=0;t<e?.length;t+=1){const n=e[t],c=await o(`http://localhost:${process.env.PORT}/api/_test/accounts/signup`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>i.json());a.push(c)}}loginUser(e=""){return a?.find(n=>n?.emailAddress===e||n?.email_address===e)}deleteUser(e=""){return o(`http://localhost:${process.env.PORT}/api/_test/accounts`,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})})}before(e=null){return r.serial.before(e)}beforeEach(e=null){return r.beforeEach(e)}after(e=null){return r.after.always(e)}afterEach(e=null){return r.afterEach.always(e)}that(e="",t=null){return r.serial(e,t)}}const l=new u;r.serial.after.always(async()=>{for(let s=0;s<a?.length;s+=1){const e=a[s];await l.deleteUser(e?._id||e?.user_id)}});var p=l;export{p as default};
