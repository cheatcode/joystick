import l,{FormData as f}from"node-fetch";import"../../lib/logRequestErrors.js";var d=(i="",o={})=>new Promise(async(a,n)=>{let s;if(o?.files?.length>0){s=new f;const t=Array.from(o?.files);for(let r=0;r<t?.length;r+=1){const e=t[r];s.append("files",e,e.name)}l(`http://localhost:${process.env.PORT}/api/_uploaders/${i}`,{method:"POST",headers:{"x-joystick-upload-id":"joystick_test","x-joystick-upload-input":JSON.stringify(o?.input||{})},body:s}).then(async r=>{const e=await r.json();e&&e.errors?n({errors:e.errors}):a(e?.uploads)})}});export{d as default};
