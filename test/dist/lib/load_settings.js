import o from"fs";import n from"./log.js";import i from"./is_valid_json_string.js";const r=(s="")=>{const e=i(s),t=process.env.NODE_ENV==="test"?"test":"start";e||(n(`Failed to parse settings file. Double-check the syntax in your settings.${process.env.NODE_ENV}.json file at the root of your project and rerun joystick ${t}.`,{level:"danger",docs:"https://cheatcode.co/docs/joystick/environment-settings",tools:[{title:"JSON Linter",url:"https://jsonlint.com/"}]}),process.exit(0))},c=(s="")=>o.readFileSync(s,"utf-8"),a=(s="")=>{const e=o.existsSync(s),t=process.env.NODE_ENV==="test"?"test":"start";e||(n(`A settings file could not be found for this environment (${process.env.NODE_ENV}). Create a settings.${process.env.NODE_ENV}.json file at the root of your project and rerun joystick ${t}.`,{level:"danger",docs:`https://cheatcode.co/docs/joystick/cli/${t}`}),process.exit(0))},_=(s={})=>{const e=`${process.cwd()}/settings.test.json`;a(e);const t=c(e);return r(t),process.env.JOYSTICK_SETTINGS=t,{parsed:JSON.parse(t),unparsed:t}};var f=_;export{f as default};
