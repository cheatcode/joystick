var o=(r="",e={})=>{throw new Error(`[joystick${r?`.${r}`:""}] ${e.message||e.reason||e}`)};var i=(r="",e=[])=>{try{console.error(`${r} failed with the following errors:`),e.forEach(t=>{console.log(t.message),t.stack&&console.log(t.stack)})}catch(t){o(r,t)}};var u=(r="{}")=>{try{return JSON.parse(r)}catch{return r}};var l=(r={})=>Object.entries(r).map(([e,t])=>`${e}=${t}`)?.join("; ");var w=async(r={})=>{try{let e=await r.text();return u(e)}catch(e){o("api.get.handleParseResponse",e)}},S=(r="",e={})=>{try{return typeof window.fetch!="undefined"&&!e?.skip?new Promise((t,a)=>{let p=e.input?JSON.stringify(e.input):null,d=e.output?JSON.stringify(e.output):null,f=`${window.location.origin}/api/_getters/${r}?input=${p}&output=${d}`,m=document.querySelector('[name="csrf"]')?.getAttribute("content"),c={...e?.headers||{},"x-joystick-csrf":m};return window?.__joystick_test__&&(c.Cookie=l({joystickLoginToken:window.__joystick_test_login_token__,joystickLoginTokenExpiresAt:window.__joystick_test_login_token_expires_at__})),fetch(f,{method:"GET",mode:"cors",headers:c,credentials:"include"}).then(async s=>{let n=await w(s);return n?.errors?(i("get request",n.errors),a(n)):t(n)}).catch(s=>(i("get request",[s]),a({errors:[s]})))}):Promise.resolve()}catch(t){o("get request",t)}};export{S as default};
