var t=(e="",r={})=>{throw new Error(`[joystick${e?`.${e}`:""}] ${r.message||r.reason||r}`)};var a=(e="",r=[])=>{try{console.error(`${e} failed with the following errors:`),r.forEach(o=>{console.log(o.message),o.stack&&console.log(o.stack)})}catch(o){t(e,o)}};var c=(e="{}")=>{try{return JSON.parse(e)}catch{return e}};var d=async(e={})=>{try{let r=await e.text();return c(r)}catch(r){t("api.get.handleParseResponse",r)}},k=(e="",r={})=>{try{return typeof window.fetch!="undefined"&&!r?.skip?new Promise((o,u)=>{let i=r.input?JSON.stringify(r.input):null,l=r.output?JSON.stringify(r.output):null,p=`${window.location.origin}/api/_getters/${e}?input=${i}&output=${l}`;return fetch(p,{method:"GET",mode:"cors",headers:{...r?.headers||{}},credentials:"include"}).then(async s=>{let n=await d(s);return n?.errors?(a("get request",n.errors),u(n)):o(n)}).catch(s=>(a("get request",[s]),u({errors:[s]})))}):Promise.resolve()}catch(o){t("get request",o)}};export{k as default};
