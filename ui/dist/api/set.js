var t=(e="",r={})=>{throw new Error(`[joystick${e?`.${e}`:""}] ${r.message||r.reason||r}`)};var n=(e="",r=[])=>{try{console.error(`${e} failed with the following errors:`),r.forEach(o=>{console.log(o.message),o.stack&&console.log(o.stack)})}catch(o){t(e,o)}};var i=(e="{}")=>{try{return JSON.parse(e)}catch(r){t("parseJSON",r)}};var m=async(e={})=>{try{let r=await e.text();return i(r)}catch(r){t("api.set.handleParseResponse",r)}},h=(e={})=>{try{return JSON.stringify(e)}catch(r){t("api.set.getBody",r)}},x=(e="",r={})=>{try{return typeof window.fetch!="undefined"?new Promise((o,c)=>{let p=`${window.location.origin}/api/_setters/${e}`,d=h(r);return fetch(p,{method:"POST",mode:"cors",headers:{...r?.headers||{},"Content-Type":"application/json"},body:d,credentials:"include"}).then(async s=>{let a=await m(s);return a?.errors?(n("set request",a.errors),c(a)):o(a)}).catch(s=>(n("set request",[s]),c({errors:[s]})))}):Promise.resolve()}catch(o){t("set request",o)}};export{x as default};
