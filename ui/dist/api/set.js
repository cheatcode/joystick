var o=(e="",r={})=>{throw new Error(`[joystick${e?`.${e}`:""}] ${r.message||r.reason||r}`)};var a=(e="",r=[])=>{try{console.error(`${e} failed with the following errors:`),r.forEach(t=>{console.log(t.message),t.stack&&console.log(t.stack)})}catch(t){o(e,t)}};var i=(e="{}")=>{try{return JSON.parse(e)}catch{return e}};var l=async(e={})=>{try{let r=await e.text();return i(r)}catch(r){o("api.set.handleParseResponse",r)}},m=(e={})=>{try{return JSON.stringify(e)}catch(r){o("api.set.getBody",r)}},E=(e="",r={})=>{try{return typeof window.fetch!="undefined"?new Promise((t,c)=>{let d=`${window.location.origin}/api/_setters/${e}`,p=m(r),u=document.querySelector('[name="csrf"]')?.getAttribute("content");return fetch(d,{method:"POST",mode:"cors",headers:{...r?.headers||{},"Content-Type":"application/json","x-joystick-csrf":u},body:p,credentials:"include"}).then(async s=>{let n=await l(s);return n?.errors?(a("set request",n.errors),c(n)):t(n)}).catch(s=>(a("set request",[s]),c({errors:[s]})))}):Promise.resolve()}catch(t){o("set request",t)}};export{E as default};
