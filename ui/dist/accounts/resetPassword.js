var u=(r="{}")=>{try{return JSON.parse(r)}catch{return r}};var o=(r="",e={})=>{throw new Error(`[joystick${r?`.${r}`:""}] ${e.message||e.reason||e}`)};var a=(r="",e=[])=>{try{console.error(`${r} failed with the following errors:`),e.forEach(t=>{console.log(t.message),t.stack&&console.log(t.stack)})}catch(t){o(r,t)}};var p=async(r={})=>{try{let e=await r.text();return u(e)}catch(e){o("accounts.request.handleParseResponse",e)}},w=(r="GET",e={})=>{try{return["POST"].includes(r)?JSON.stringify({...e,origin:window?.location?.origin}):null}catch(t){o("accounts.request.getBody",t)}},m=(r=null)=>{try{switch(r){case"authenticated":case"user":return"GET";default:return"POST"}}catch(e){o("accounts.request.getHTTPMethod",e)}},d=(r="",e={})=>{try{if(typeof window.fetch!="undefined")return new Promise((t,n)=>{let h=`${window.location.origin}/api/_accounts/${r}`,i=m(r),l=w(i,e);return fetch(h,{method:i,mode:"cors",headers:{"Content-Type":"application/json"},body:l,credentials:"include"}).then(async s=>{let c=await p(s);return c?.errors?(a(`accounts.${r}`,c.errors),n(c)):t(c)}).catch(s=>(a(`accounts.${r}`,[s]),n({errors:[s]})))})}catch(t){o(`accounts.request.${r}`,t)}};var O=(r={})=>{try{return d("reset-password",r)}catch(e){o("accounts.resetPassword",e)}};export{O as default};
