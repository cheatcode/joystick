var c=(e="",n={})=>{throw new Error(`[joystick${e?`.${e}`:""}] ${n.message||n.reason||n}`)};var p=(e={})=>{try{return Object.entries(e).map(([n,s])=>{let[o,...t]=n.split(" ");return{type:o.toLowerCase(),selector:t.join(" "),handler:s}})}catch(n){c("component.events.serialize",n)}};var h=(e={},n={},s=[])=>{try{let o=Object.keys(e?.events||{})?.length>0?p(e?.events):[];for(let t=0;t<o?.length;t+=1){let r=o[t];s.push({...r,instance:e,elements:document.querySelectorAll(`body [js-i="${e.instanceId}"] ${r?.selector}`),handler:function(i){Object.defineProperty(i,"target",{value:i.composedPath()[0]}),r.handler(i,{...e||{},setState:e?.setState.bind(e),...n||{}})}})}if(e?.children){let t=Object.entries(e?.children)?.flatMap(([r,l])=>l);for(let r=0;r<t?.length;r+=1){let l=t[r];h(l,n,s)}}return s}catch(o){c("component.events.registerListenersFix.getListeners",o)}},d=(e={},n={})=>{try{let o=h(e,n,[])?.flatMap((t={})=>[].flatMap.call(t?.elements||[],r=>{let{elements:l=[],...i}=t||{};return{...i,element:r}}));for(let t=0;t<o?.length;t+=1){let{instance:r,element:l,elementSelector:i,type:a,handler:m}=o[t];l.addEventListener(a,m),r._eventListeners=[...r?._eventListeners||[],{instance:r,element:l,elementSelector:i,type:a,handler:m}]}}catch(s){c("component.events.registerListenersFix",s)}},y=d;export{y as default};
