var j=Object.create;var R=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var $=r=>R(r,"__esModule",{value:!0});var V=(r,a)=>()=>(a||r((a={exports:{}}).exports,a),a.exports);var _=(r,a,h)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of z(a))!U.call(r,c)&&c!=="default"&&R(r,c,{get:()=>a[c],enumerable:!(h=O(a,c))||h.enumerable});return r},q=r=>_($(R(r!=null?j(N(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var F=V((d,P)=>{var k=[].slice;(function(r,a){return typeof define=="function"&&define.amd!=null?define([],a):typeof d!="undefined"&&d!==null?P.exports=a():r.UrlPattern=a()})(d,function(){var r,a,h,c,C,y,x,f,S,g,A,b,E,w,p;return S=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},x=function(t,e){var n,i,u;for(u=[],n=-1,i=t.length;++n<i;)u=u.concat(e(t[n]));return u},w=function(t,e){var n,i,u;for(u="",n=-1,i=t.length;++n<i;)u+=e(t[n]);return u},E=function(t){return new RegExp(t.toString()+"|").exec("").length-1},A=function(t,e){var n,i,u,s,o;for(s={},n=-1,u=t.length;++n<u;)i=t[n],o=e[n],o!=null&&(s[i]!=null?(Array.isArray(s[i])||(s[i]=[s[i]]),s[i].push(o)):s[i]=o);return s},r={},r.Result=function(t,e){this.value=t,this.rest=e},r.Tagged=function(t,e){this.tag=t,this.value=e},r.tag=function(t,e){return function(n){var i,u;if(i=e(n),i!=null)return u=new r.Tagged(t,i.value),new r.Result(u,i.rest)}},r.regex=function(t){return function(e){var n,i;if(n=t.exec(e),n!=null)return i=n[0],new r.Result(i,e.slice(i.length))}},r.sequence=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],function(e){var n,i,u,s,o,l;for(n=-1,i=t.length,l=[],s=e;++n<i;){if(u=t[n],o=u(s),o==null)return;l.push(o.value),s=o.rest}return new r.Result(l,s)}},r.pick=function(){var t,e;return t=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],function(n){var i,u;if(u=r.sequence.apply(r,e)(n),u!=null)return i=u.value,u.value=i[t],u}},r.string=function(t){var e;return e=t.length,function(n){if(n.slice(0,e)===t)return new r.Result(t,n.slice(e))}},r.lazy=function(t){var e;return e=null,function(n){return e==null&&(e=t()),e(n)}},r.baseMany=function(t,e,n,i,u){var s,o,l,m;for(l=u,m=n?"":[];!(e!=null&&(s=e(l),s!=null)||(o=t(l),o==null));)n?m+=o.value:m.push(o.value),l=o.rest;if(!(i&&m.length===0))return new r.Result(m,l)},r.many1=function(t){return function(e){return r.baseMany(t,null,!1,!0,e)}},r.concatMany1Till=function(t,e){return function(n){return r.baseMany(t,e,!0,!0,n)}},r.firstChoice=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],function(e){var n,i,u,s;for(n=-1,i=t.length;++n<i;)if(u=t[n],s=u(e),s!=null)return s}},b=function(t){var e;return e={},e.wildcard=r.tag("wildcard",r.string(t.wildcardChar)),e.optional=r.tag("optional",r.pick(1,r.string(t.optionalSegmentStartChar),r.lazy(function(){return e.pattern}),r.string(t.optionalSegmentEndChar))),e.name=r.regex(new RegExp("^["+t.segmentNameCharset+"]+")),e.named=r.tag("named",r.pick(1,r.string(t.segmentNameStartChar),r.lazy(function(){return e.name}))),e.escapedChar=r.pick(1,r.string(t.escapeChar),r.regex(/^./)),e.static=r.tag("static",r.concatMany1Till(r.firstChoice(r.lazy(function(){return e.escapedChar}),r.regex(/^./)),r.firstChoice(r.string(t.segmentNameStartChar),r.string(t.optionalSegmentStartChar),r.string(t.optionalSegmentEndChar),e.wildcard))),e.token=r.lazy(function(){return r.firstChoice(e.wildcard,e.optional,e.named,e.static)}),e.pattern=r.many1(r.lazy(function(){return e.token})),e},f={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},y=function(t,e){if(Array.isArray(t))return w(t,function(n){return y(n,e)});switch(t.tag){case"wildcard":return"(.*?)";case"named":return"(["+e+"]+)";case"static":return S(t.value);case"optional":return"(?:"+y(t.value,e)+")?"}},C=function(t,e){return e==null&&(e=f.segmentValueCharset),"^"+y(t,e)+"$"},c=function(t){if(Array.isArray(t))return x(t,c);switch(t.tag){case"wildcard":return["_"];case"named":return[t.value];case"static":return[];case"optional":return c(t.value)}},g=function(t,e,n,i){var u,s,o,l;if(i==null&&(i=!1),l=t[e],l==null){if(i)throw new Error("no values provided for key `"+e+"`");return}if(u=n[e]||0,s=Array.isArray(l)?l.length-1:0,u>s){if(i)throw new Error("too few values provided for key `"+e+"`");return}return o=Array.isArray(l)?l[u]:l,i&&(n[e]=u+1),o},h=function(t,e,n){var i,u;if(Array.isArray(t)){for(i=-1,u=t.length;++i<u;)if(h(t[i],e,n))return!0;return!1}switch(t.tag){case"wildcard":return g(e,"_",n,!1)!=null;case"named":return g(e,t.value,n,!1)!=null;case"static":return!1;case"optional":return h(t.value,e,n)}},p=function(t,e,n){if(Array.isArray(t))return w(t,function(i){return p(i,e,n)});switch(t.tag){case"wildcard":return g(e,"_",n,!0);case"named":return g(e,t.value,n,!0);case"static":return t.value;case"optional":return h(t.value,e,n)?p(t.value,e,n):""}},a=function(t,e){var n,i,u,s,o;if(t instanceof a){this.isRegex=t.isRegex,this.regex=t.regex,this.ast=t.ast,this.names=t.names;return}if(this.isRegex=t instanceof RegExp,!(typeof t=="string"||this.isRegex))throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=t,e!=null){if(!Array.isArray(e))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(n=E(this.regex),e.length!==n)throw new Error("regex contains "+n+" groups but array of group names contains "+e.length);this.names=e}return}if(t==="")throw new Error("argument must not be the empty string");if(o=t.replace(/\s+/g,""),o!==t)throw new Error("argument must not contain whitespace");if(i={escapeChar:(e!=null?e.escapeChar:void 0)||f.escapeChar,segmentNameStartChar:(e!=null?e.segmentNameStartChar:void 0)||f.segmentNameStartChar,segmentNameCharset:(e!=null?e.segmentNameCharset:void 0)||f.segmentNameCharset,segmentValueCharset:(e!=null?e.segmentValueCharset:void 0)||f.segmentValueCharset,optionalSegmentStartChar:(e!=null?e.optionalSegmentStartChar:void 0)||f.optionalSegmentStartChar,optionalSegmentEndChar:(e!=null?e.optionalSegmentEndChar:void 0)||f.optionalSegmentEndChar,wildcardChar:(e!=null?e.wildcardChar:void 0)||f.wildcardChar},s=b(i),u=s.pattern(t),u==null)throw new Error("couldn't parse pattern");if(u.rest!=="")throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(C(this.ast,i.segmentValueCharset)),this.names=c(this.ast)},a.prototype.match=function(t){var e,n;return n=this.regex.exec(t),n==null?null:(e=n.slice(1),this.names?A(this.names,e):e)},a.prototype.stringify=function(t){if(t==null&&(t={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(t!==Object(t))throw new Error("argument must be an object or undefined");return p(this.ast,t,{})},a.escapeForRegex=S,a.concatMap=x,a.stringConcatMap=w,a.regexGroupCount=E,a.keysAndValuesToObject=A,a.P=r,a.newParser=b,a.defaultOptions=f,a.astNodeToRegexString=C,a.astNodeToNames=c,a.getParam=g,a.astNodeContainsSegmentsForProvidedParams=h,a.stringify=p,a})});var M=q(F());var v=(r="",a={})=>{throw new Error(`[joystick${r?`.${r}`:""}] ${a.message||a.reason||a}`)};var T=r=>{try{return typeof r=="string"}catch(a){v("types.isString",a)}};var H=(r={})=>{try{return{...r,isActive:(a="")=>{if(!T(a))return!1;if(r?.route!=="*"){let h=new M.default(r?.route||"");return r?.path&&r.path===a||!!h?.match(a)}return!1}}}catch(a){v("component.url.compile",a)}};export{H as default};
