var g=(n={},t={})=>{Object.entries(n).forEach(([o,r])=>{t[o]=r})};var c=(n="",t={})=>{throw new Error(`[joystick${n?`.${n}`:""}] ${t.message||t.reason||t}`)};var A=n=>{try{return typeof n=="function"}catch(t){c("types.isFunction",t)}};var p=n=>{try{return!!(n&&typeof n=="object"&&!Array.isArray(n))}catch(t){c("types.isObject",t)}};var f=(n={},t="",o="id")=>{try{let r=n&&n.id;if(p(n)&&r){let s=Object.keys(n);for(let e=0;e<s.length;e+=1){let a=s[e],i=n[a];if(a===o&&i===t)return n;if(a==="children"&&Array.isArray(i))for(let d=0;d<i.length;d+=1){let y=i[d],l=f(y,t,o);if(l!==null)return l}}}return null}catch(r){c("component.findComponentInTreeByField",r)}},m=f;var h=(n={},t="",o="",r={})=>{try{let s=null;n.dragDrop={...n.dragDrop||{},events:{...n.dragDrop?.events||{},[`drag [data-${t}="${o}"]`]:(e={},a={})=>{r?.events?.onDrag&&A(r.events.onDrag)&&r.events.onDrag(e,a)},[`dragend [data-${t}="${o}"]`]:(e={},a={})=>{t==="droppable"&&r.sortable&&(e.target.classList.remove("is-dragging"),s=null),r?.events?.onDragEnd&&A(r.events.onDragEnd)&&r.events.onDragEnd(e,a)},[`dragenter [data-${t}="${o}"]`]:(e={},a={})=>{r?.events?.onDragEnter&&A(r.events.onDragEnter)&&r.events.onDragEnter(e,a)},[`dragleave [data-${t}="${o}"]`]:(e={},a={})=>{r?.events?.onDragLeave&&A(r.events.onDragLeave)&&r.events.onDragLeave(e,a)},[`dragover [data-${t}="${o}"]`]:(e={},a={})=>{e.preventDefault(),t==="droppable"&&r.sortable&&(s.compareDocumentPosition(e.target)===Node.DOCUMENT_POSITION_PRECEDING?e.target.parentNode.insertBefore(s,e.target):e.target.parentNode.insertBefore(s,e.target.nextSibling)),r?.events?.onDragOver&&A(r.events.onDragOver)&&r.events.onDragOver(e,a)},[`dragstart [data-${t}="${o}"]`]:(e={},a={})=>{if(t==="droppable"&&r.sortable){e.dataTransfer.effectAllowed="move",s=e.target,e.target.classList.add("is-dragging"),e.dataTransfer.setData("text/plain",null);let i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",e.dataTransfer.setDragImage(i,1,1)}r?.events?.onDragStart&&A(r.events.onDragStart)&&r.events.onDragStart(e,a)},[`drop [data-${t}="${o}"]`]:(e={},a={})=>{r?.events?.onDrop&&A(r.events.onDrop)&&r.events.onDrop(e,a)}}}}catch(s){c("component.renderMethods.dragDrop.attachEvents",s)}};var u=class{constructor(t={}){g(t,this)}initHTML(t=""){let o=document.createElement("div");o.innerHTML=t?.trim()?.replace(/\n/g,"");let r=o.childNodes;if(r?.length>0){for(let s=0;s<r?.length;s+=1)r[s].setAttribute("data-droppable",this.name),this.attachEvents(this.name,this.parent);return o.innerHTML}}attachEvents(t="",o={}){let r=m(window.joystick._internal.tree,o.instanceId,"instanceId")?.instance||{};h(r,"droppable",t,{events:this.events,sortable:this.sortable})}},M=u;export{M as default};
