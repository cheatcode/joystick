var g=(n={},t={})=>{Object.entries(n).forEach(([o,e])=>{t[o]=e})};var c=(n="",t={})=>{throw new Error(`[joystick${n?`.${n}`:""}] ${t.message||t.reason||t}`)};var A=n=>{try{return typeof n=="function"}catch(t){c("types.isFunction",t)}};var p=n=>{try{return!!(n&&typeof n=="object"&&!Array.isArray(n))}catch(t){c("types.isObject",t)}};var f=(n={},t="",o="id")=>{try{let e=n&&n.id;if(p(n)&&e){let s=Object.keys(n);for(let r=0;r<s.length;r+=1){let a=s[r],i=n[a];if(a===o&&i===t)return n;if(a==="children"&&Array.isArray(i))for(let d=0;d<i.length;d+=1){let u=i[d],l=f(u,t,o);if(l!==null)return l}}}return null}catch(e){c("component.findComponentInTreeByField",e)}},m=f;var h=(n={},t="",o="",e={})=>{try{let s=null;n.dragDrop={...n.dragDrop||{},events:{...n.dragDrop?.events||{},[`drag [data-${t}="${o}"]`]:(r={},a={})=>{e?.events?.onDrag&&A(e.events.onDrag)&&e.events.onDrag(r,a)},[`dragend [data-${t}="${o}"]`]:(r={},a={})=>{t==="droppable"&&e.sortable&&(r.target.classList.remove("is-dragging"),s=null),e?.events?.onDragEnd&&A(e.events.onDragEnd)&&e.events.onDragEnd(r,a)},[`dragenter [data-${t}="${o}"]`]:(r={},a={})=>{e?.events?.onDragEnter&&A(e.events.onDragEnter)&&e.events.onDragEnter(r,a)},[`dragleave [data-${t}="${o}"]`]:(r={},a={})=>{e?.events?.onDragLeave&&A(e.events.onDragLeave)&&e.events.onDragLeave(r,a)},[`dragover [data-${t}="${o}"]`]:(r={},a={})=>{r.preventDefault(),t==="droppable"&&e.sortable&&(s.compareDocumentPosition(r.target)===Node.DOCUMENT_POSITION_PRECEDING?r.target.parentNode.insertBefore(s,r.target):r.target.parentNode.insertBefore(s,r.target.nextSibling)),e?.events?.onDragOver&&A(e.events.onDragOver)&&e.events.onDragOver(r,a)},[`dragstart [data-${t}="${o}"]`]:(r={},a={})=>{if(t==="droppable"&&e.sortable){r.dataTransfer.effectAllowed="move",s=r.target,r.target.classList.add("is-dragging"),r.dataTransfer.setData("text/plain",null);let i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",r.dataTransfer.setDragImage(i,1,1)}e?.events?.onDragStart&&A(e.events.onDragStart)&&e.events.onDragStart(r,a)},[`drop [data-${t}="${o}"]`]:(r={},a={})=>{e?.events?.onDrop&&A(e.events.onDrop)&&e.events.onDrop(r,a)}}}}catch(s){c("component.renderMethods.dragDrop.attachEvents",s)}};var y=class{constructor(t={}){g(t,this)}initHTML(t=""){let o=document.createElement("div");o.innerHTML=t?.trim()?.replace(/\n/g,"");let e=o.childNodes;if(e?.length>0){for(let s=0;s<e?.length;s+=1)e[s].setAttribute("data-droppable",this.name),this.attachEvents(this.name,this.parent);return o.innerHTML}}attachEvents(t="",o={}){let e=m(window.joystick._internal.tree,o.instanceId,"instanceId")?.instance||{};h(e,"droppable",t,{events:this.events,sortable:this.sortable})}},M=y;export{M as default};
