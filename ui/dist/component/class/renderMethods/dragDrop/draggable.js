var p=(n={},e={})=>{Object.entries(n).forEach(([a,r])=>{e[a]=r})};var f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890".split(""),m=(n=16)=>{let e="",a=0;for(;a<n;)e+=f[Math.floor(Math.random()*(f.length-1))],a+=1;return e};var i=(n="",e={})=>{throw new Error(`[joystick${n?`.${n}`:""}] ${e.message||e.reason||e}`)};var c=n=>{try{return typeof n=="function"}catch(e){i("types.isFunction",e)}};var h=n=>{try{return!!(n&&typeof n=="object"&&!Array.isArray(n))}catch(e){i("types.isObject",e)}};var y=(n={},e="",a="id")=>{try{let r=n&&n.id;if(h(n)&&r){let s=Object.keys(n);for(let t=0;t<s.length;t+=1){let o=s[t],d=n[o];if(o===a&&d===e)return n;if(o==="children"&&Array.isArray(d))for(let l=0;l<d.length;l+=1){let b=d[l],g=y(b,e,a);if(g!==null)return g}}}return null}catch(r){i("component.findComponentInTreeByField",r)}},u=y;var x=(n={},e="",a="",r={})=>{try{let s=null;n.dragDrop={...n.dragDrop||{},events:{...n.dragDrop?.events||{},[`drag [data-${e}="${a}"]`]:(t={},o={})=>{r?.events?.onDrag&&c(r.events.onDrag)&&r.events.onDrag(t,o)},[`dragend [data-${e}="${a}"]`]:(t={},o={})=>{e==="droppable"&&r.sortable&&(t.target.classList.remove("is-dragging"),s=null),r?.events?.onDragEnd&&c(r.events.onDragEnd)&&r.events.onDragEnd(t,o)},[`dragenter [data-${e}="${a}"]`]:(t={},o={})=>{r?.events?.onDragEnter&&c(r.events.onDragEnter)&&r.events.onDragEnter(t,o)},[`dragleave [data-${e}="${a}"]`]:(t={},o={})=>{r?.events?.onDragLeave&&c(r.events.onDragLeave)&&r.events.onDragLeave(t,o)},[`dragover [data-${e}="${a}"]`]:(t={},o={})=>{e==="droppable"&&r.sortable&&t.target.parentNode.hasAttribute("data-droppable")&&(s.compareDocumentPosition(t.target)===Node.DOCUMENT_POSITION_PRECEDING?(s.style=`transform: translate3d(0px, ${t.target.top-s.top}px, 0px);`,t.target.parentNode.insertBefore(s,t.target),t.target.style=""):(s.style=`transform: translate3d(0px, ${s.top-t.target.nextSibling.top}px, 0px);`,t.target.parentNode.insertBefore(s,t.target.nextSibling)),s.style=""),r?.events?.onDragOver&&c(r.events.onDragOver)&&r.events.onDragOver(t,o)},[`dragstart [data-${e}="${a}"]`]:(t={},o={})=>{e==="droppable"&&r.sortable&&(t.dataTransfer.effectAllowed="move",s=t.target,t.target.classList.add("is-dragging"),t.dataTransfer.setData("text/plain",null),t.dataTransfer.setDragImage(new Image,0,0)),r?.events?.onDragStart&&c(r.events.onDragStart)&&r.events.onDragStart(t,o)},[`drop [data-${e}="${a}"]`]:(t={},o={})=>{r?.events?.onDrop&&c(r.events.onDrop)&&r.events.onDrop(t,o)}}}}catch(s){i("component.renderMethods.dragDrop.attachEvents",s)}};var D=class{constructor(e={}){p(e,this)}initHTML(e=""){let a=document.createElement("div");a.innerHTML=e?.trim()?.replace(/\n/g,"");let r=a.childNodes;if(r?.length>0){for(let s=0;s<r?.length;s+=1){let t=r[s],o=this.id||m();t.setAttribute("draggable",!0),t.setAttribute("data-draggable",o),this.attachEvents(o,this.parent)}return a.innerHTML}}attachEvents(e="",a={}){let r=u(window.joystick._internal.tree,a.instanceId,"instanceId")?.instance||{};x(r,"draggable",e,{events:this.events})}},_=D;export{_ as default};
