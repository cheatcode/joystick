var l=(n={},r={})=>{Object.entries(n).forEach(([a,e])=>{r[a]=e})};var f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890".split(""),p=(n=16)=>{let r="",a=0;for(;a<n;)r+=f[Math.floor(Math.random()*(f.length-1))],a+=1;return r};var c=(n="",r={})=>{throw new Error(`[joystick${n?`.${n}`:""}] ${r.message||r.reason||r}`)};var A=n=>{try{return typeof n=="function"}catch(r){c("types.isFunction",r)}};var m=n=>{try{return!!(n&&typeof n=="object"&&!Array.isArray(n))}catch(r){c("types.isObject",r)}};var h=(n={},r="",a="id")=>{try{let e=n&&n.id;if(m(n)&&e){let s=Object.keys(n);for(let t=0;t<s.length;t+=1){let o=s[t],i=n[o];if(o===a&&i===r)return n;if(o==="children"&&Array.isArray(i))for(let d=0;d<i.length;d+=1){let x=i[d],g=h(x,r,a);if(g!==null)return g}}}return null}catch(e){c("component.findComponentInTreeByField",e)}},u=h;var y=(n={},r="",a="",e={})=>{try{let s=null;n.dragDrop={...n.dragDrop||{},events:{...n.dragDrop?.events||{},[`drag [data-${r}="${a}"]`]:(t={},o={})=>{e?.events?.onDrag&&A(e.events.onDrag)&&e.events.onDrag(t,o)},[`dragend [data-${r}="${a}"]`]:(t={},o={})=>{r==="droppable"&&e.sortable&&(t.target.classList.remove("is-dragging"),s=null),e?.events?.onDragEnd&&A(e.events.onDragEnd)&&e.events.onDragEnd(t,o)},[`dragenter [data-${r}="${a}"]`]:(t={},o={})=>{e?.events?.onDragEnter&&A(e.events.onDragEnter)&&e.events.onDragEnter(t,o)},[`dragleave [data-${r}="${a}"]`]:(t={},o={})=>{e?.events?.onDragLeave&&A(e.events.onDragLeave)&&e.events.onDragLeave(t,o)},[`dragover [data-${r}="${a}"]`]:(t={},o={})=>{t.preventDefault(),r==="droppable"&&e.sortable&&(s.compareDocumentPosition(t.target)===Node.DOCUMENT_POSITION_PRECEDING?t.target.parentNode.insertBefore(s,t.target):t.target.parentNode.insertBefore(s,t.target.nextSibling)),e?.events?.onDragOver&&A(e.events.onDragOver)&&e.events.onDragOver(t,o)},[`dragstart [data-${r}="${a}"]`]:(t={},o={})=>{if(r==="droppable"&&e.sortable){t.dataTransfer.effectAllowed="move",s=t.target,t.target.classList.add("is-dragging"),t.dataTransfer.setData("text/plain",null);let i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",t.dataTransfer.setDragImage(i,1,1)}e?.events?.onDragStart&&A(e.events.onDragStart)&&e.events.onDragStart(t,o)},[`drop [data-${r}="${a}"]`]:(t={},o={})=>{e?.events?.onDrop&&A(e.events.onDrop)&&e.events.onDrop(t,o)}}}}catch(s){c("component.renderMethods.dragDrop.attachEvents",s)}};var D=class{constructor(r={}){l(r,this)}initHTML(r=""){let a=document.createElement("div");a.innerHTML=r?.trim()?.replace(/\n/g,"");let e=a.childNodes;if(e?.length>0){for(let s=0;s<e?.length;s+=1){let t=e[s],o=this.id||p();t.setAttribute("draggable",!0),t.setAttribute("data-draggable",o),this.attachEvents(o,this.parent)}return a.innerHTML}}attachEvents(r="",a={}){let e=u(window.joystick._internal.tree,a.instanceId,"instanceId")?.instance||{};y(e,"draggable",r,{events:this.events})}},Q=D;export{Q as default};
