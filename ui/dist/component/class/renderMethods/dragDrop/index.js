var s=(o="",t={})=>{throw new Error(`[joystick${o?`.${o}`:""}] ${t.message||t.reason||t}`)};var c=o=>{try{return typeof o=="function"}catch(t){s("types.isFunction",t)}};var u=o=>{try{return!!(o&&typeof o=="object"&&!Array.isArray(o))}catch(t){s("types.isObject",t)}};var m=()=>typeof window=="undefined";var p=(o={},t={})=>{Object.entries(o).forEach(([r,e])=>{t[r]=e})};var y="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890".split(""),b=(o=16)=>{let t="",r=0;for(;r<o;)t+=y[Math.floor(Math.random()*(y.length-1))],r+=1;return t};var x=(o={},t="",r="id")=>{try{let e=o&&o.id;if(u(o)&&e){let a=Object.keys(o);for(let n=0;n<a.length;n+=1){let i=a[n],d=o[i];if(i===r&&d===t)return o;if(i==="children"&&Array.isArray(d))for(let f=0;f<d.length;f+=1){let v=d[f],h=x(v,t,r);if(h!==null)return h}}}return null}catch(e){s("component.findComponentInTreeByField",e)}},l=x;var g=(o={},t="",r="",e={})=>{try{let a=null;o.dragDrop={...o.dragDrop||{},events:{...o.dragDrop?.events||{},[`drag [data-${t}="${r}"]`]:(n={},i={})=>{e?.events?.onDrag&&c(e.events.onDrag)&&e.events.onDrag(n,i)},[`dragend [data-${t}="${r}"]`]:(n={},i={})=>{t==="droppable"&&e.sortable&&(n.target.classList.remove("is-dragging"),a=null),e?.events?.onDragEnd&&c(e.events.onDragEnd)&&e.events.onDragEnd(n,i)},[`dragenter [data-${t}="${r}"]`]:(n={},i={})=>{e?.events?.onDragEnter&&c(e.events.onDragEnter)&&e.events.onDragEnter(n,i)},[`dragleave [data-${t}="${r}"]`]:(n={},i={})=>{e?.events?.onDragLeave&&c(e.events.onDragLeave)&&e.events.onDragLeave(n,i)},[`dragover [data-${t}="${r}"]`]:(n={},i={})=>{t==="droppable"&&e.sortable&&n.target.parentNode.hasAttribute("data-droppable")&&(a.compareDocumentPosition(n.target)===Node.DOCUMENT_POSITION_PRECEDING?(a.style=`transform: translate3d(0px, ${n.target.top-a.top}px, 0px);`,n.target.parentNode.insertBefore(a,n.target),n.target.style=""):(a.style=`transform: translate3d(0px, ${a.top-n.target.nextSibling.top}px, 0px);`,n.target.parentNode.insertBefore(a,n.target.nextSibling)),a.style=""),e?.events?.onDragOver&&c(e.events.onDragOver)&&e.events.onDragOver(n,i)},[`dragstart [data-${t}="${r}"]`]:(n={},i={})=>{t==="droppable"&&e.sortable&&(n.dataTransfer.effectAllowed="move",a=n.target,n.target.classList.add("is-dragging"),n.dataTransfer.setData("text/plain",null),n.dataTransfer.setDragImage(new Image,0,0)),e?.events?.onDragStart&&c(e.events.onDragStart)&&e.events.onDragStart(n,i)},[`drop [data-${t}="${r}"]`]:(n={},i={})=>{e?.events?.onDrop&&c(e.events.onDrop)&&e.events.onDrop(n,i)}}}}catch(a){s("component.renderMethods.dragDrop.attachEvents",a)}};var D=class{constructor(t={}){p(t,this)}initHTML(t=""){let r=document.createElement("div");r.innerHTML=t?.trim()?.replace(/\n/g,"");let e=r.childNodes;if(e?.length>0){for(let a=0;a<e?.length;a+=1){let n=e[a],i=this.id||b();n.setAttribute("draggable",!0),n.setAttribute("data-draggable",i),this.attachEvents(i,this.parent)}return r.innerHTML}}attachEvents(t="",r={}){let e=l(window.joystick._internal.tree,r.instanceId,"instanceId")?.instance||{};g(e,"draggable",t,{events:this.events})}},w=D;var E=class{constructor(t={}){p(t,this)}initHTML(t=""){let r=document.createElement("div");r.innerHTML=t?.trim()?.replace(/\n/g,"");let e=r.childNodes;if(e?.length>0){for(let a=0;a<e?.length;a+=1)e[a].setAttribute("data-droppable",this.name),this.attachEvents(this.name,this.parent);return r.innerHTML}}attachEvents(t="",r={}){let e=l(window.joystick._internal.tree,r.instanceId,"instanceId")?.instance||{};g(e,"droppable",t,{events:this.events,sortable:this.sortable})}},I=E;var T=function(o="",t={}){try{let r=new w({...t,origin:this.name,parent:this.parent});return m()?o:r.initHTML(o,t?.id)}catch(r){s("component.renderMethods.dragDrop.draggable",r)}},F=function(t="",r=null,e={}){try{let a=new I({name:t,parent:this,...e});if(!r||r&&!c(r))throw Error("Second argument to droppable must be a callback function returning HTML.");return m()?r(T.bind({name:t,parent:this})):a.initHTML(r(T.bind({name:t,parent:this})))}catch(a){s("component.renderMethods.dragDrop",a)}},nt=F;export{nt as default};
